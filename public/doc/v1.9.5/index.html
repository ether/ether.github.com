<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Etherpad v1.9.5 Manual &amp; Documentation</title>
<style>
body {
  border-top: solid #44b492 5pt;
  line-height: 150%;
  font-family: "Quicksand", sans-serif;
  color: #313b4a;
  max-width: 1440px;
  margin: 0 auto;
  padding: 20px;
}

a {
  color: #555;
}

h1,
h2 {
  color: #44b492;
  line-height: 100%;
}

h2 {
  font-size: 48px;
}

h3 {
  font-size: 1.8rem;
}

h4 {
  font-size: 1.5rem;
}

h5 {
  font-size: 1.2rem;
}

a:hover {
  color: #44b492;
}

pre {
  background-color: #e0e0e0;
  padding: 20px;
}

code {
  background-color: #e0e0e0;
}

img {
  max-width: 100%;
}

table,
th,
td {
  text-align: left;
  border: 1px solid gray;
  border-collapse: collapse;
}

th {
  padding: 0.5em;
  background: #eee;
}

td {
  padding: 0.5em;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="article">
<div id="header">
<h1>Etherpad v1.9.5 Manual &amp; Documentation</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about_this_documentation">About this Documentation</a></li>
<li><a href="#_statistics">Statistics</a></li>
<li><a href="#_localization">Localization</a>
<ul class="sectlevel2">
<li><a href="#_translating">Translating</a></li>
<li><a href="#_implementation">Implementation</a>
<ul class="sectlevel3">
<li><a href="#_server_side">Server-side</a></li>
<li><a href="#_client_side">Client-side</a></li>
</ul>
</li>
<li><a href="#_localizing_plugins">Localizing plugins</a>
<ul class="sectlevel3">
<li><a href="#_1_mark_the_strings_to_translate">1. Mark the strings to translate</a></li>
<li><a href="#_2_create_translate_files_in_the_locales_directory_of_your_plugin">2. Create translate files in the locales directory of your plugin</a></li>
<li><a href="#_overwrite_core_messages">Overwrite core messages</a></li>
</ul>
</li>
<li><a href="#_customization_for_administrators">Customization for Administrators</a></li>
</ul>
</li>
<li><a href="#_docker">Docker</a>
<ul class="sectlevel2">
<li><a href="#_downloading_from_docker_hub">Downloading from Docker Hub</a></li>
<li><a href="#_build_a_personalized_container">Build a personalized container</a>
<ul class="sectlevel3">
<li><a href="#_rebuilding_with_custom_settings">Rebuilding with custom settings</a></li>
<li><a href="#_rebuilding_including_some_plugins">Rebuilding including some plugins</a></li>
<li><a href="#_rebuilding_including_export_functionality_for_docpdfodt">Rebuilding including export functionality for DOC/PDF/ODT</a>
<ul class="sectlevel4">
<li><a href="#_via_abiword">Via Abiword</a></li>
<li><a href="#_via_libreoffice">Via Libreoffice</a></li>
</ul>
</li>
<li><a href="#_examples">Examples</a></li>
</ul>
</li>
<li><a href="#_running_your_instance">Running your instance:</a></li>
<li><a href="#_options_available_by_default">Options available by default</a>
<ul class="sectlevel3">
<li><a href="#_general">General</a></li>
<li><a href="#_database">Database</a></li>
<li><a href="#_pad_options">Pad Options</a></li>
<li><a href="#_shortcuts">Shortcuts</a></li>
<li><a href="#_skins">Skins</a></li>
<li><a href="#_logging">Logging</a></li>
<li><a href="#_advanced">Advanced</a></li>
<li><a href="#_examples_2">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_skins_2">Skins</a></li>
<li><a href="#_embed_parameters">Embed parameters</a>
<ul class="sectlevel2">
<li><a href="#_showlinenumbers">showLineNumbers</a></li>
<li><a href="#_showcontrols">showControls</a></li>
<li><a href="#_showchat">showChat</a></li>
<li><a href="#_usemonospacefont">useMonospaceFont</a></li>
<li><a href="#_username">userName</a></li>
<li><a href="#_usercolor">userColor</a></li>
<li><a href="#_nocolors">noColors</a></li>
<li><a href="#_alwaysshowchat">alwaysShowChat</a></li>
<li><a href="#_lang">lang</a></li>
<li><a href="#_rtl">rtl</a></li>
<li><a href="#_l">#L</a></li>
</ul>
</li>
<li><a href="#_http_api">HTTP API</a>
<ul class="sectlevel2">
<li><a href="#_what_can_i_do_with_this_api">What can I do with this API?</a>
<ul class="sectlevel3">
<li><a href="#_openapi">OpenAPI</a></li>
</ul>
</li>
<li><a href="#_examples_3">Examples</a>
<ul class="sectlevel3">
<li><a href="#_example_1">Example 1</a></li>
<li><a href="#_example_2">Example 2</a></li>
</ul>
</li>
<li><a href="#_usage">Usage</a>
<ul class="sectlevel3">
<li><a href="#_api_version">API version</a></li>
<li><a href="#_request_format">Request Format</a></li>
<li><a href="#_response_format">Response Format</a></li>
<li><a href="#_overview">Overview</a></li>
</ul>
</li>
<li><a href="#_data_types">Data Types</a>
<ul class="sectlevel3">
<li><a href="#_authentication">Authentication</a></li>
<li><a href="#_node_interoperability">Node Interoperability</a></li>
</ul>
</li>
<li><a href="#_api_methods">API Methods</a>
<ul class="sectlevel3">
<li><a href="#_groups">Groups</a>
<ul class="sectlevel4">
<li><a href="#_creategroup">createGroup()</a></li>
<li><a href="#_creategroupifnotexistsforgroupmapper">createGroupIfNotExistsFor(groupMapper)</a></li>
<li><a href="#_deletegroupgroupid">deleteGroup(groupID)</a></li>
<li><a href="#_listpadsgroupid">listPads(groupID)</a></li>
<li><a href="#_creategrouppadgroupid_padname_text_authorid">createGroupPad(groupID, padName, [text], [authorId])</a></li>
<li><a href="#_listallgroups">listAllGroups()</a></li>
</ul>
</li>
<li><a href="#_author">Author</a>
<ul class="sectlevel4">
<li><a href="#_createauthorname">createAuthor([name])</a></li>
<li><a href="#_createauthorifnotexistsforauthormapper_name">createAuthorIfNotExistsFor(authorMapper [, name])</a></li>
<li><a href="#_listpadsofauthorauthorid">listPadsOfAuthor(authorID)</a></li>
<li><a href="#_getauthornameauthorid">getAuthorName(authorID)</a></li>
</ul>
</li>
<li><a href="#_session">Session</a>
<ul class="sectlevel4">
<li><a href="#_createsessiongroupid_authorid_validuntil">createSession(groupID, authorID, validUntil)</a></li>
<li><a href="#_deletesessionsessionid">deleteSession(sessionID)</a></li>
<li><a href="#_getsessioninfosessionid">getSessionInfo(sessionID)</a></li>
<li><a href="#_listsessionsofgroupgroupid">listSessionsOfGroup(groupID)</a></li>
<li><a href="#_listsessionsofauthorauthorid">listSessionsOfAuthor(authorID)</a></li>
</ul>
</li>
<li><a href="#_pad_content">Pad Content</a>
<ul class="sectlevel4">
<li><a href="#_gettextpadid_rev">getText(padID, [rev])</a></li>
<li><a href="#_settextpadid_text_authorid">setText(padID, text, [authorId])</a></li>
<li><a href="#_appendtextpadid_text_authorid">appendText(padID, text, [authorId])</a></li>
<li><a href="#_gethtmlpadid_rev">getHTML(padID, [rev])</a></li>
<li><a href="#_sethtmlpadid_html_authorid">setHTML(padID, html, [authorId])</a></li>
<li><a href="#_getattributepoolpadid">getAttributePool(padID)</a></li>
<li><a href="#_getrevisionchangesetpadid_rev">getRevisionChangeset(padID, [rev])</a></li>
<li><a href="#_creatediffhtmlpadid_startrev_endrev">createDiffHTML(padID, startRev, endRev)</a></li>
<li><a href="#_restorerevisionpadid_rev_authorid">restoreRevision(padId, rev, [authorId])</a></li>
</ul>
</li>
<li><a href="#_chat">Chat</a>
<ul class="sectlevel4">
<li><a href="#_getchathistorypadid_start_end">getChatHistory(padID, [start, end])</a></li>
<li><a href="#_getchatheadpadid">getChatHead(padID)</a></li>
<li><a href="#_appendchatmessagepadid_text_authorid_time">appendChatMessage(padID, text, authorID [, time])</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_pad">Pad</a>
<ul class="sectlevel3">
<li><a href="#_createpadpadid_text_authorid">createPad(padID, [text], [authorId])</a></li>
<li><a href="#_getrevisionscountpadid">getRevisionsCount(padID)</a></li>
<li><a href="#_getsavedrevisionscountpadid">getSavedRevisionsCount(padID)</a></li>
<li><a href="#_listsavedrevisionspadid">listSavedRevisions(padID)</a></li>
<li><a href="#_saverevisionpadid_rev">saveRevision(padID [, rev])</a></li>
<li><a href="#_paduserscountpadid">padUsersCount(padID)</a></li>
<li><a href="#_paduserspadid">padUsers(padID)</a></li>
<li><a href="#_deletepadpadid">deletePad(padID)</a></li>
<li><a href="#_copypadsourceid_destinationid_forcefalse">copyPad(sourceID, destinationID[, force=false])</a></li>
<li><a href="#_copypadwithouthistorysourceid_destinationid_forcefalse_authorid">copyPadWithoutHistory(sourceID, destinationID, [force=false], [authorId])</a></li>
<li><a href="#_movepadsourceid_destinationid_forcefalse">movePad(sourceID, destinationID[, force=false])</a></li>
<li><a href="#_getreadonlyidpadid">getReadOnlyID(padID)</a></li>
<li><a href="#_getpadidreadonlyid">getPadID(readOnlyID)</a></li>
<li><a href="#_setpublicstatuspadid_publicstatus">setPublicStatus(padID, publicStatus)</a></li>
<li><a href="#_getpublicstatuspadid">getPublicStatus(padID)</a></li>
<li><a href="#_listauthorsofpadpadid">listAuthorsOfPad(padID)</a></li>
<li><a href="#_getlasteditedpadid">getLastEdited(padID)</a></li>
<li><a href="#_sendclientsmessagepadid_msg">sendClientsMessage(padID, msg)</a></li>
<li><a href="#_checktoken">checkToken()</a></li>
</ul>
</li>
<li><a href="#_pads">Pads</a>
<ul class="sectlevel3">
<li><a href="#_listallpads">listAllPads()</a></li>
<li><a href="#_global">Global</a>
<ul class="sectlevel4">
<li><a href="#_getstats">getStats()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_hooks">Hooks</a>
<ul class="sectlevel2">
<li><a href="#_registered_hook_functions">Registered hook functions</a>
<ul class="sectlevel3">
<li><a href="#_arguments">Arguments</a></li>
<li><a href="#_expected_behavior">Expected behavior</a></li>
<li><a href="#_return_values">Return values</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_client_side_hooks">Client-side hooks</a>
<ul class="sectlevel2">
<li><a href="#_documentready">documentReady</a></li>
<li><a href="#_acedomlinepreprocesslineattributes">aceDomLinePreProcessLineAttributes</a></li>
<li><a href="#_acedomlineprocesslineattributes">aceDomLineProcessLineAttributes</a></li>
<li><a href="#_acecreatedomline">aceCreateDomLine</a></li>
<li><a href="#_acepostwritedomlinehtml">acePostWriteDomLineHTML</a></li>
<li><a href="#_aceattribstoclasses">aceAttribsToClasses</a></li>
<li><a href="#_aceattribclasses">aceAttribClasses</a></li>
<li><a href="#_acegetfilterstack">aceGetFilterStack</a></li>
<li><a href="#_aceeditorcss">aceEditorCSS</a></li>
<li><a href="#_aceinitinnerdocbodyhead">aceInitInnerdocbodyHead</a></li>
<li><a href="#_aceeditevent">aceEditEvent</a></li>
<li><a href="#_aceregisternonscrollableeditevents">aceRegisterNonScrollableEditEvents</a></li>
<li><a href="#_aceregisterblockelements">aceRegisterBlockElements</a></li>
<li><a href="#_aceinitialized">aceInitialized</a></li>
<li><a href="#_postaceinit">postAceInit</a></li>
<li><a href="#_posttoolbarinit">postToolbarInit</a></li>
<li><a href="#_posttimesliderinit">postTimesliderInit</a></li>
<li><a href="#_gotorevisionevent">goToRevisionEvent</a></li>
<li><a href="#_userjoinorupdate">userJoinOrUpdate</a></li>
<li><a href="#_chatnewmessage">chatNewMessage</a></li>
<li><a href="#_chatsendmessage">chatSendMessage</a></li>
<li><a href="#_collectcontentpre">collectContentPre</a></li>
<li><a href="#_collectcontentimage">collectContentImage</a></li>
<li><a href="#_collectcontentpost">collectContentPost</a></li>
<li><a href="#_handleclientmessage_name">handleClientMessage_`name`</a></li>
<li><a href="#_acestartlineandcharforpoint_aceendlineandcharforpoint">aceStartLineAndCharForPoint-aceEndLineAndCharForPoint</a></li>
<li><a href="#_acekeyevent">aceKeyEvent</a></li>
<li><a href="#_collectcontentlinetext">collectContentLineText</a></li>
<li><a href="#_collectcontentlinebreak">collectContentLineBreak</a></li>
<li><a href="#_disableauthorcolorsforthisline">disableAuthorColorsForThisLine</a></li>
<li><a href="#_acesetauthorstyle">aceSetAuthorStyle</a></li>
<li><a href="#_aceselectionchanged">aceSelectionChanged</a></li>
</ul>
</li>
<li><a href="#_server_side_hooks">Server-side hooks</a>
<ul class="sectlevel2">
<li><a href="#_loadsettings">loadSettings</a></li>
<li><a href="#_shutdown">shutdown</a></li>
<li><a href="#_pluginuninstall">pluginUninstall</a></li>
<li><a href="#_plugininstall">pluginInstall</a></li>
<li><a href="#_init_plugin_name">init_&lt;plugin name&gt;</a></li>
<li><a href="#_expresspresession">expressPreSession</a></li>
<li><a href="#_expressconfigure">expressConfigure</a></li>
<li><a href="#_expresscreateserver">expressCreateServer</a></li>
<li><a href="#_expresscloseserver">expressCloseServer</a></li>
<li><a href="#_eejsblock_name">eejsBlock_`&lt;name&gt;`</a></li>
<li><a href="#_padinittoolbar">padInitToolbar</a></li>
<li><a href="#_onaccesscheck">onAccessCheck</a></li>
<li><a href="#_getauthorid">getAuthorId</a></li>
<li><a href="#_padcreate">padCreate</a></li>
<li><a href="#_paddefaultcontent">padDefaultContent</a></li>
<li><a href="#_padload">padLoad</a></li>
<li><a href="#_padupdate">padUpdate</a></li>
<li><a href="#_padcopy">padCopy</a></li>
<li><a href="#_padremove">padRemove</a></li>
<li><a href="#_padcheck">padCheck</a></li>
<li><a href="#_socketio">socketio</a></li>
<li><a href="#_preauthorize">preAuthorize</a></li>
<li><a href="#_authorize">authorize</a></li>
<li><a href="#_authenticate">authenticate</a></li>
<li><a href="#_authfailure">authFailure</a></li>
<li><a href="#_preauthzfailure">preAuthzFailure</a></li>
<li><a href="#_authnfailure">authnFailure</a></li>
<li><a href="#_authzfailure">authzFailure</a></li>
<li><a href="#_handlemessage">handleMessage</a></li>
<li><a href="#_handlemessagesecurity">handleMessageSecurity</a></li>
<li><a href="#_clientvars">clientVars</a></li>
<li><a href="#_getlinehtmlforexport">getLineHTMLForExport</a></li>
<li><a href="#_exporthtmladditionalcontent">exportHTMLAdditionalContent</a></li>
<li><a href="#_stylesforexport">stylesForExport</a></li>
<li><a href="#_aceattribclasses_2">aceAttribClasses</a></li>
<li><a href="#_exportfilename">exportFileName</a></li>
<li><a href="#_exporthtmladditionaltags">exportHtmlAdditionalTags</a></li>
<li><a href="#_exporthtmladditionaltagswithdata">exportHtmlAdditionalTagsWithData</a></li>
<li><a href="#_exportetherpadadditionalcontent">exportEtherpadAdditionalContent</a></li>
<li><a href="#_exportetherpad">exportEtherpad</a></li>
<li><a href="#_importetherpad">importEtherpad</a></li>
<li><a href="#_import">import</a></li>
<li><a href="#_userjoin">userJoin</a></li>
<li><a href="#_userleave">userLeave</a></li>
<li><a href="#_chatnewmessage_2">chatNewMessage</a></li>
</ul>
</li>
<li><a href="#_editorinfo">editorInfo</a>
<ul class="sectlevel2">
<li><a href="#_editorinfo_ace_replacerangestart_end_text">editorInfo.ace_replaceRange(start, end, text)</a></li>
<li><a href="#_editorinfo_ace_getrep">editorInfo.ace_getRep()</a></li>
<li><a href="#_editorinfo_ace_getauthor">editorInfo.ace_getAuthor()</a></li>
<li><a href="#_editorinfo_ace_incallstack">editorInfo.ace_inCallStack()</a></li>
<li><a href="#_editorinfo_ace_incallstackifnecessary">editorInfo.ace_inCallStackIfNecessary(?)</a></li>
<li><a href="#_editorinfo_ace_focus">editorInfo.ace_focus(?)</a></li>
<li><a href="#_editorinfo_ace_importtext">editorInfo.ace_importText(?)</a></li>
<li><a href="#_editorinfo_ace_importatext">editorInfo.ace_importAText(?)</a></li>
<li><a href="#_editorinfo_ace_exporttext">editorInfo.ace_exportText(?)</a></li>
<li><a href="#_editorinfo_ace_editorchangedsize">editorInfo.ace_editorChangedSize(?)</a></li>
<li><a href="#_editorinfo_ace_setonkeypress">editorInfo.ace_setOnKeyPress(?)</a></li>
<li><a href="#_editorinfo_ace_setonkeydown">editorInfo.ace_setOnKeyDown(?)</a></li>
<li><a href="#_editorinfo_ace_setnotifydirty">editorInfo.ace_setNotifyDirty(?)</a></li>
<li><a href="#_editorinfo_ace_dispose">editorInfo.ace_dispose(?)</a></li>
<li><a href="#_editorinfo_ace_seteditablebool">editorInfo.ace_setEditable(bool)</a></li>
<li><a href="#_editorinfo_ace_execcommand">editorInfo.ace_execCommand(?)</a></li>
<li><a href="#_editorinfo_ace_callwithacefn_callstack_normalize">editorInfo.ace_callWithAce(fn, callStack, normalize)</a></li>
<li><a href="#_editorinfo_ace_setpropertykey_value">editorInfo.ace_setProperty(key, value)</a></li>
<li><a href="#_editorinfo_ace_setbasetexttxt">editorInfo.ace_setBaseText(txt)</a></li>
<li><a href="#_editorinfo_ace_setbaseattributedtextatxt_apooljsonobj">editorInfo.ace_setBaseAttributedText(atxt, apoolJsonObj)</a></li>
<li><a href="#_editorinfo_ace_applychangestobasec_optauthor_apooljsonobj">editorInfo.ace_applyChangesToBase(c, optAuthor, apoolJsonObj)</a></li>
<li><a href="#_editorinfo_ace_prepareuserchangeset">editorInfo.ace_prepareUserChangeset()</a></li>
<li><a href="#_editorinfo_ace_applypreparedchangesettobase">editorInfo.ace_applyPreparedChangesetToBase()</a></li>
<li><a href="#_editorinfo_ace_setuserchangenotificationcallbackf">editorInfo.ace_setUserChangeNotificationCallback(f)</a></li>
<li><a href="#_editorinfo_ace_setauthorinfoauthor_info">editorInfo.ace_setAuthorInfo(author, info)</a></li>
<li><a href="#_editorinfo_ace_fastincorp">editorInfo.ace_fastIncorp(?)</a></li>
<li><a href="#_editorinfo_ace_iscaret">editorInfo.ace_isCaret(?)</a></li>
<li><a href="#_editorinfo_ace_getlineandcharforpoint">editorInfo.ace_getLineAndCharForPoint(?)</a></li>
<li><a href="#_editorinfo_ace_performdocumentapplyattributestocharrange">editorInfo.ace_performDocumentApplyAttributesToCharRange(?)</a></li>
<li><a href="#_editorinfo_ace_setattributeonselectionattribute_enabled">editorInfo.ace_setAttributeOnSelection(attribute, enabled)</a></li>
<li><a href="#_editorinfo_ace_toggleattributeonselection">editorInfo.ace_toggleAttributeOnSelection(?)</a></li>
<li><a href="#_editorinfo_ace_getattributeonselectionattribute_prevchar">editorInfo.ace_getAttributeOnSelection(attribute, prevChar)</a></li>
<li><a href="#_editorinfo_ace_performselectionchange">editorInfo.ace_performSelectionChange(?)</a></li>
<li><a href="#_editorinfo_ace_doindentoutdent">editorInfo.ace_doIndentOutdent(?)</a></li>
<li><a href="#_editorinfo_ace_doundoredo">editorInfo.ace_doUndoRedo(?)</a></li>
<li><a href="#_editorinfo_ace_doinsertunorderedlist">editorInfo.ace_doInsertUnorderedList(?)</a></li>
<li><a href="#_editorinfo_ace_doinsertorderedlist">editorInfo.ace_doInsertOrderedList(?)</a></li>
<li><a href="#_editorinfo_ace_performdocumentapplyattributestorange">editorInfo.ace_performDocumentApplyAttributesToRange()</a></li>
<li><a href="#_editorinfo_ace_getauthorinfos">editorInfo.ace_getAuthorInfos()</a></li>
<li><a href="#_editorinfo_ace_performdocumentreplacerangestart_end_newtext">editorInfo.ace_performDocumentReplaceRange(start, end, newText)</a></li>
<li><a href="#_editorinfo_ace_performdocumentreplacecharrangestartchar_endchar_newtext">editorInfo.ace_performDocumentReplaceCharRange(startChar, endChar, newText)</a></li>
<li><a href="#_editorinfo_ace_renumberlistlinenum">editorInfo.ace_renumberList(lineNum)</a></li>
<li><a href="#_editorinfo_ace_doreturnkey">editorInfo.ace_doReturnKey()</a></li>
<li><a href="#_editorinfo_ace_isblockelementelement">editorInfo.ace_isBlockElement(element)</a></li>
<li><a href="#_editorinfo_ace_getlinelisttypelinenum">editorInfo.ace_getLineListType(lineNum)</a></li>
<li><a href="#_editorinfo_ace_caretline">editorInfo.ace_caretLine()</a></li>
<li><a href="#_editorinfo_ace_caretcolumn">editorInfo.ace_caretColumn()</a></li>
<li><a href="#_editorinfo_ace_caretdocchar">editorInfo.ace_caretDocChar()</a></li>
<li><a href="#_editorinfo_ace_iswordchar">editorInfo.ace_isWordChar(?)</a></li>
</ul>
</li>
<li><a href="#_changeset_library">Changeset Library</a>
<ul class="sectlevel2">
<li><a href="#_changeset">Changeset</a></li>
<li><a href="#_attribute_pool">Attribute Pool</a></li>
<li><a href="#_further_reading">Further Reading</a></li>
</ul>
</li>
<li><a href="#_plugin_framework">Plugin Framework</a>
<ul class="sectlevel2">
<li><a href="#_plugins_update">plugins.update</a></li>
<li><a href="#_hooks_callall">hooks.callAll</a></li>
<li><a href="#_hooks_acallall">hooks.aCallAll</a></li>
<li><a href="#">&#8230;&#8203;</a></li>
</ul>
</li>
<li><a href="#_toolbar_controller">Toolbar controller</a>
<ul class="sectlevel2">
<li><a href="#_buttonopts">button(opts)</a></li>
<li><a href="#_selectbuttonopts">selectButton(opts)</a></li>
<li><a href="#_selectbutton_addoptionvalue_text_attributes">SelectButton.addOption(value, text, attributes)</a></li>
<li><a href="#_registerbuttonname_item">registerButton(name, item)</a></li>
</ul>
</li>
<li><a href="#_editbar">Editbar</a>
<ul class="sectlevel2">
<li><a href="#_isenabled">isEnabled()</a></li>
<li><a href="#_disable">disable()</a></li>
<li><a href="#_toggledropdowndropdown">toggleDropDown(dropdown)</a></li>
<li><a href="#_registercommandcmd_callback">registerCommand(cmd, callback)</a></li>
<li><a href="#_registeracecommandcmd_callback">registerAceCommand(cmd, callback)</a></li>
<li><a href="#_registerdropdowncommandcmd_dropdown">registerDropdownCommand(cmd, dropdown)</a></li>
<li><a href="#_triggercommandcmd_item">triggerCommand(cmd[, item])</a></li>
</ul>
</li>
<li><a href="#_plugins">Plugins</a>
<ul class="sectlevel2">
<li><a href="#_folder_structure">Folder structure</a></li>
<li><a href="#_plugin_definition">Plugin definition</a>
<ul class="sectlevel3">
<li><a href="#_client_hooks_and_server_hooks">Client hooks and server hooks</a></li>
<li><a href="#_styling">Styling</a></li>
<li><a href="#_parts">Parts</a>
<ul class="sectlevel4">
<li><a href="#_prepost">pre/post</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_package_definition">Package definition</a></li>
<li><a href="#_templates">Templates</a></li>
<li><a href="#_writing_and_running_front_end_tests_for_your_plugin">Writing and running front-end tests for your plugin</a></li>
</ul>
</li>
<li><a href="#_cookies">Cookies</a></li>
<li><a href="#_database_structure">Database structure</a>
<ul class="sectlevel2">
<li><a href="#_keys_and_their_values">Keys and their values</a>
<ul class="sectlevel3">
<li><a href="#_groups_2">groups</a></li>
<li><a href="#_padpadid">pad:$PADID</a></li>
<li><a href="#_padpadidrevsrevnum">pad:$PADID:revs:$REVNUM</a></li>
<li><a href="#_padpadidchatchatnum">pad:$PADID:chat:$CHATNUM</a></li>
<li><a href="#_pad2readonlypadid">pad2readonly:$PADID</a></li>
<li><a href="#_readonly2padreadonlyid">readonly2pad:$READONLYID</a></li>
<li><a href="#_token2authortokenid">token2author:$TOKENID</a></li>
<li><a href="#_globalauthorauthorid">globalAuthor:$AUTHORID</a></li>
<li><a href="#_mapper2groupmapper">mapper2group:$MAPPER</a></li>
<li><a href="#_mapper2authormapper">mapper2author:$MAPPER</a></li>
<li><a href="#_groupgroupid">group:$GROUPID</a></li>
<li><a href="#_author2sessionsauthorid">author2sessions:$AUTHORID</a></li>
<li><a href="#_group2sessionsgroupid">group2sessions:$GROUPID</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_about_this_documentation">About this Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this documentation is to comprehensively explain Etherpad,
both from a reference as well as a conceptual point of view.</p>
</div>
<div class="paragraph">
<p>Where appropriate, property types, method arguments, and the arguments
provided to event handlers are detailed in a list underneath the topic
heading.</p>
</div>
<div class="paragraph">
<p>Every <code>.html</code> file is generated based on the corresponding
<code>.md</code> file in the <code>doc/api/</code> folder in the source tree. The
documentation is generated using the <code>src/bin/doc/generate.js</code> program.
The HTML template is located at <code>doc/template.html</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_statistics">Statistics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Etherpad keeps track of the goings-on inside the edit machinery. If you&#8217;d like to have a look at this, just point your browser to <code>/stats</code>.</p>
</div>
<div class="paragraph">
<p>We currently measure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>totalUsers (counter)</p>
</li>
<li>
<p>connects (meter)</p>
</li>
<li>
<p>disconnects (meter)</p>
</li>
<li>
<p>pendingEdits (counter)</p>
</li>
<li>
<p>edits (timer)</p>
</li>
<li>
<p>failedChangesets (meter)</p>
</li>
<li>
<p>httpRequests (timer)</p>
</li>
<li>
<p>http500 (meter)</p>
</li>
<li>
<p>memoryUsage (gauge)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Under the hood, we are happy to rely on <a href="https://github.com/felixge/node-measured">measured</a> for all our metrics needs.</p>
</div>
<div class="paragraph">
<p>To modify or simply access our stats in your plugin, simply <code>require('ep_etherpad-lite/stats')</code> which is a <a href="https://yaorg.github.io/node-measured/packages/measured-core/Collection.html"><code>measured.Collection</code></a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_localization">Localization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Etherpad provides a multi-language user interface, that&#8217;s apart from your users' content, so users from different countries can collaborate on a single document, while still having the user interface displayed in their mother tongue.</p>
</div>
<div class="sect2">
<h3 id="_translating">Translating</h3>
<div class="paragraph">
<p>We rely on <a href="https://translatewiki.net" class="bare">https://translatewiki.net</a> to handle the translation process for us, so if you&#8217;d like to help&#8230;&#8203;</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign up at <a href="https://translatewiki.net" class="bare">https://translatewiki.net</a></p>
</li>
<li>
<p>Visit our <a href="https://translatewiki.net/wiki/Translating:Etherpad_lite">TWN project page</a></p>
</li>
<li>
<p>Click on <code>Translate Etherpad lite interface</code></p>
</li>
<li>
<p>Choose a target language, you&#8217;d like to translate our interface to, and hit <code>Fetch</code></p>
</li>
<li>
<p>Start translating!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Translations will be send back to us regularly and will eventually appear in the next release.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implementation">Implementation</h3>
<div class="sect3">
<h4 id="_server_side">Server-side</h4>
<div class="paragraph">
<p><code>/src/locales</code> contains files for all supported languages which contain the translated strings. Translation files are simple <code>*.json</code> files and look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "pad.modals.connected": "Connecté.",
  "pad.modals.uderdup": "Ouvrir dans une nouvelle fenêtre.",
  "pad.toolbar.unindent.title": "Dèsindenter",
  "pad.toolbar.undo.title": "Annuler (Ctrl-Z)",
  "timeslider.pageTitle": "{{appTitle}} Curseur temporel",
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each translation consists of a key (the id of the string that is to be translated) and the translated string. Terms in curly braces must not be touched but left as they are, since they represent a dynamically changing part of the string like a variable. Imagine a message welcoming a user: <code>Welcome, {{userName}}!</code> would be translated as <code>Ahoy, {{userName}}!</code> in pirate.</p>
</div>
</div>
<div class="sect3">
<h4 id="_client_side">Client-side</h4>
<div class="paragraph">
<p>We use a <code>language</code> cookie to save your language settings if you change them. If you don&#8217;t, we autodetect your locale using information from your browser. Then, the preferred language is fed into a library called <a href="https://github.com/marcelklehr/html10n.js">html10n.js</a>, which loads the appropriate translations and applies them to our templates. Its features include translation params, pluralization, include rules and a nice javascript API.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_localizing_plugins">Localizing plugins</h3>
<div class="sect3">
<h4 id="_1_mark_the_strings_to_translate">1. Mark the strings to translate</h4>
<div class="paragraph">
<p>In the template files of your plugin, change all hardcoded messages/strings&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>from:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;option value="0"&gt;Heading 1&lt;/option&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;option data-l10n-id="ep_heading.h1" value="0"&gt;&lt;/option&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the javascript files of your plugin, change all hardcoded messages/strings&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>from:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">alert ('Chat');</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">alert(window._('pad.chat'));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_2_create_translate_files_in_the_locales_directory_of_your_plugin">2. Create translate files in the locales directory of your plugin</h4>
<div class="ulist">
<ul>
<li>
<p>The name of the file must be the language code of the language it contains translations for (see <a href="https://joker-x.github.io/languages4translatewiki/test/">supported lang codes</a>; e.g. en ? English, es ? Spanish&#8230;&#8203;)</p>
</li>
<li>
<p>The extension of the file must be <code>.json</code></p>
</li>
<li>
<p>The default language is English, so your plugin should always provide <code>en.json</code></p>
</li>
<li>
<p>In order to avoid naming conflicts, your message keys should start with the name of your plugin followed by a dot (see below)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>ep_your-plugin/locales/en.json</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "ep_your-plugin.h1": "Heading 1"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>ep_your-plugin/locales/es.json</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "ep_your-plugin.h1": "Título 1"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Every time the http server is started, it will auto-detect your messages and merge them automatically with the core messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_overwrite_core_messages">Overwrite core messages</h4>
<div class="paragraph">
<p>You can overwrite Etherpad&#8217;s core messages in your plugin&#8217;s locale files.
For example, if you want to replace <code>Chat</code> with <code>Notes</code>, simply add&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p><strong>ep_your-plugin/locales/en.json</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "ep_your-plugin.h1": "Heading 1",
  "pad.chat": "Notes"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_customization_for_administrators">Customization for Administrators</h3>
<div class="paragraph">
<p>As an Etherpad administrator, it is possible to overwrite core messages as well as messages in plugins. These include error messages, labels, and user instructions. Whereas the localization in the source code is in separate files separated by locale, an administrator&#8217;s custom localizations are in <code>settings.json</code> under the <code>customLocaleStrings</code> key, with each locale separated by a sub-key underneath.</p>
</div>
<div class="paragraph">
<p>For example, let&#8217;s say you want to change the text on the "New Pad" button on Etherpad&#8217;s home page. If you look in <code>locales/en.json</code> (or <code>locales/en-gb.json</code>) you&#8217;ll see the key for this text is <code>"index.newPad"</code>. You could add the following to <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">  "customLocaleStrings": {
    "fr": {
      "index.newPad": "Créer un document"
    },
    "en-gb": {
      "index.newPad": "Create a document"
    },
    "en": {
      "index.newPad": "Create a document"
    }
  }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_docker">Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The official Docker image is available on <a href="https://hub.docker.com/r/etherpad/etherpad" class="bare">https://hub.docker.com/r/etherpad/etherpad</a>.</p>
</div>
<div class="sect2">
<h3 id="_downloading_from_docker_hub">Downloading from Docker Hub</h3>
<div class="paragraph">
<p>If you are ok downloading a <a href="https://hub.docker.com/r/etherpad/etherpad">prebuilt image from Docker Hub</a>, these are the commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># gets the latest published version
docker pull etherpad/etherpad

# gets a specific version
docker pull etherpad/etherpad:1.8.0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_a_personalized_container">Build a personalized container</h3>
<div class="paragraph">
<p>If you want to use a personalized settings file, <strong>you will have to rebuild your image</strong>.
All of the following instructions are as a member of the <code>docker</code> group.
By default, the Etherpad Docker image is built and run in <code>production</code> mode: no development dependencies are installed, and asset bundling speeds up page load time.</p>
</div>
<div class="sect3">
<h4 id="_rebuilding_with_custom_settings">Rebuilding with custom settings</h4>
<div class="paragraph">
<p>Edit <code>&lt;BASEDIR&gt;/settings.json.docker</code> at your will. When rebuilding the image, this file will be copied inside your image and renamed to <code>settings.json</code>.</p>
</div>
<div class="paragraph">
<p><strong>Each configuration parameter can also be set via an environment variable</strong>, using the syntax <code>"${ENV_VAR}"</code> or <code>"${ENV_VAR:default_value}"</code>. For details, refer to <code>settings.json.template</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rebuilding_including_some_plugins">Rebuilding including some plugins</h4>
<div class="paragraph">
<p>If you want to install some plugins in your container, it is sufficient to list them in the ETHERPAD_PLUGINS build variable.
The variable value has to be a space separated, double quoted list of plugin names (see examples).</p>
</div>
<div class="paragraph">
<p>Some plugins will need personalized settings. Just refer to the previous section, and include them in your custom <code>settings.json.docker</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rebuilding_including_export_functionality_for_docpdfodt">Rebuilding including export functionality for DOC/PDF/ODT</h4>
<div class="paragraph">
<p>If you want to be able to export your pads to DOC/PDF/ODT files, you can install
either Abiword or Libreoffice via setting a build variable.</p>
</div>
<div class="sect4">
<h5 id="_via_abiword">Via Abiword</h5>
<div class="paragraph">
<p>For installing Abiword, set the <code>INSTALL_ABIWORD</code> build variable to any value.</p>
</div>
<div class="paragraph">
<p>Also, you will need to configure the path to the abiword executable
via setting the <code>abiword</code> property in <code>&lt;BASEDIR&gt;/settings.json.docker</code> to
<code>/usr/bin/abiword</code> or via setting the environment variable  <code>ABIWORD</code> to
<code>/usr/bin/abiword</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_via_libreoffice">Via Libreoffice</h5>
<div class="paragraph">
<p>For installing Libreoffice instead, set the <code>INSTALL_SOFFICE</code> build variable
to any value.</p>
</div>
<div class="paragraph">
<p>Also, you will need to configure the path to the libreoffice executable
via setting the <code>soffice</code> property in <code>&lt;BASEDIR&gt;/settings.json.docker</code> to
<code>/usr/bin/soffice</code> or via setting the environment variable  <code>SOFFICE</code> to
<code>/usr/bin/soffice</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples">Examples</h4>
<div class="paragraph">
<p>Build a Docker image from the currently checked-out code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker build --tag &lt;YOUR_USERNAME&gt;/etherpad .</code></pre>
</div>
</div>
<div class="paragraph">
<p>Include two plugins in the container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker build --build-arg ETHERPAD_PLUGINS="ep_comments_page ep_author_neat" --tag &lt;YOUR_USERNAME&gt;/etherpad .</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_your_instance">Running your instance:</h3>
<div class="paragraph">
<p>To run your instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --detach --publish &lt;DESIRED_PORT&gt;:9001 &lt;YOUR_USERNAME&gt;/etherpad</code></pre>
</div>
</div>
<div class="paragraph">
<p>And point your browser to <code><a href="http://&lt;YOUR_IP&gt;:&lt;DESIRED_PORT&gt" class="bare">http://&lt;YOUR_IP&gt;:&lt;DESIRED_PORT&gt</a>;</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_options_available_by_default">Options available by default</h3>
<div class="paragraph">
<p>The <code>settings.json.docker</code> available by default allows to control almost every setting via environment variables.</p>
</div>
<div class="sect3">
<h4 id="_general">General</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TITLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Etherpad</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FAVICON</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">favicon default name, or a fully specified URL to your own favicon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>favicon.ico</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DEFAULT_PAD_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default text of a pad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Welcome to Etherpad! This pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents! Get involved with Etherpad at <a href="https://etherpad.org" class="bare">https://etherpad.org</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP which etherpad should bind at. Change to <code>::</code> for IPv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.0.0.0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PORT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">port which etherpad should bind at</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9001</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ADMIN_PASSWORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the password for the <code>admin</code> user (leave unspecified if you do not want to create it)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USER_PASSWORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the password for the first user <code>user</code> (leave unspecified if you do not want to create it)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_database">Database</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_TYPE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a database supported by <a href="https://www.npmjs.com/package/ueberdb2" class="bare">https://www.npmjs.com/package/ueberdb2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not set, thus will fall back to <code>DirtyDB</code> (please choose one instead)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_HOST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the host of the database</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_PORT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the port of the database</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the database name</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_USER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a database user with sufficient permissions to create tables</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_PASS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the password for the database username</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_CHARSET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the character set for the tables (only required for MySQL)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DB_FILENAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in case <code>DB_TYPE</code> is <code>DirtyDB</code> or <code>sqlite</code>, the database file.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/dirty.db</code>, <code>var/etherpad.sq3</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If your database needs additional settings, you will have to use a personalized <code>settings.json.docker</code> and rebuild the container (or otherwise put the updated <code>settings.json</code> inside your image).</p>
</div>
</div>
<div class="sect3">
<h4 id="_pad_options">Pad Options</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_NO_COLORS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_SHOW_CONTROLS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_SHOW_CHAT</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_SHOW_LINE_NUMBERS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_USE_MONOSPACE_FONT</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_USER_NAME</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_USER_COLOR</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_RTL</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_ALWAYS_SHOW_CHAT</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_CHAT_AND_USERS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_OPTIONS_LANG</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_shortcuts">Shortcuts</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_ALT_F9</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">focus on the File Menu and/or editbar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_ALT_C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">focus on the Chat window</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_S</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">save a revision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_Z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undo/redo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_Y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">redo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_I</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">italic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_U</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">underline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_H</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">backspace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">strike through</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_SHIFT_1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ordered list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_SHIFT_2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">shows a gritter popup showing a line author</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_SHIFT_L</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unordered list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_SHIFT_N</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ordered list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CMD_SHIFT_C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">clear authorship</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_DELETE</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_RETURN</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_ESC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in mozilla versions 14-19 avoid reconnecting pad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_TAB</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_CTRL_HOME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">scroll to top of pad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_PAGE_UP</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PAD_SHORTCUTS_ENABLED_PAGE_DOWN</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_skins">Skins</h4>
<div class="paragraph">
<p>You can use the UI skin variants builder at <code>/p/test#skinvariantsbuilder</code></p>
</div>
<div class="paragraph">
<p>For the colibris skin only, you can choose how to render the three main containers:
  * toolbar (top menu with icons)
  * editor (containing the text of the pad)
  * background (area outside of editor, mostly visible when using page style)</p>
</div>
<div class="paragraph">
<p>For each of the 3 containers you can choose 4 color combinations:
   * super-light
   * light
   * dark
   * super-dark</p>
</div>
<div class="paragraph">
<p>For the editor container, you can also make it full width by adding <code>full-width-editor</code> variant (by default editor is rendered as a page, with a max-width of 900px).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SKIN_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">either <code>no-skin</code>, <code>colibris</code> or an existing directory under <code>src/static/skins</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>colibris</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SKIN_VARIANTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiple skin variants separated by spaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>super-light-toolbar super-light-editor light-background</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_logging">Logging</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOGLEVEL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">valid values are <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code> and <code>ERROR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INFO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DISABLE_IP_LOGGING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Privacy: disable IP logging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_advanced">Advanced</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COOKIE_KEY_ROTATION_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How often (ms) to rotate in a new secret for signing cookies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>86400000</code> (1 day)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COOKIE_SAME_SITE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of the SameSite cookie property.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"Lax"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COOKIE_SESSION_LIFETIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long (ms) a user can be away before they must log in again.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>864000000</code> (10 days)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COOKIE_SESSION_REFRESH_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How often (ms) to write the latest cookie expiration time.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>86400000</code> (1 day)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOW_SETTINGS_IN_ADMIN_PAGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hide/show the settings.json in admin page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRUST_PROXY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set to <code>true</code> if you are using a reverse proxy in front of Etherpad (for example: Traefik for SSL termination via Let&#8217;s Encrypt). This will affect security and correctness of the logs if not done</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IMPORT_MAX_FILE_SIZE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum allowed file size when importing a pad, in bytes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>52428800</code> (50 MB)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IMPORT_EXPORT_MAX_REQ_PER_IP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum number of import/export calls per IP.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IMPORT_EXPORT_RATE_LIMIT_WINDOW</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the call rate for import/export requests will be estimated in this time window (in milliseconds)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>90000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COMMIT_RATE_LIMIT_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">duration of the rate limit window for commits by individual users/IPs (in seconds)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COMMIT_RATE_LIMIT_POINTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum number of changes per IP to allow during the rate limit window</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUPPRESS_ERRORS_IN_PAD_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should we suppress errors from being visible in the default Pad Text?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">`false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REQUIRE_SESSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this option is enabled, a user must have a session to access pads. This effectively allows only group pads to be accessed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EDIT_ONLY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users may edit pads but not create new ones. Pad creation is only via the API. This applies both to group pads and regular pads.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MINIFY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, all css &amp; js will be minified before sending to the client. This will improve the loading performance massively, but makes it difficult to debug the javascript/css</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MAX_AGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long may clients use served javascript code (in seconds)? Not setting this may cause problems during deployment. Set to 0 to disable caching.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>21600</code> (6 hours)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ABIWORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute path to the Abiword executable. Abiword is needed to get advanced import/export features of pads. Setting it to null disables Abiword and will only allow plain text and HTML import/exports.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SOFFICE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the absolute path to the soffice executable. LibreOffice can be used in lieu of Abiword to export pads. Setting it to null disables LibreOffice exporting.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALLOW_UNKNOWN_FILE_ENDS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow import of file types other than the supported ones: txt, doc, docx, rtf, odt, html &amp; htm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REQUIRE_AUTHENTICATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is used if you require authentication of all users. Note: "/admin" always requires authentication.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REQUIRE_AUTHORIZATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Require authorization by a module, or a user with is_admin set, see below.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AUTOMATIC_RECONNECTION_TIMEOUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time (in seconds) to automatically reconnect pad when a "Force reconnect" message is shown to user. Set to 0 to disable automatic reconnection.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FOCUS_LINE_PERCENTAGE_ABOVE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percentage of viewport height to be additionally scrolled. e.g. 0.5, to place caret line in the middle of viewport, when user edits a line above of the viewport. Set to 0 to disable extra scrolling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FOCUS_LINE_PERCENTAGE_BELOW</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percentage of viewport height to be additionally scrolled. e.g. 0.5, to place caret line in the middle of viewport, when user edits a line below of the viewport. Set to 0 to disable extra scrolling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FOCUS_LINE_PERCENTAGE_ARROW_UP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percentage of viewport height to be additionally scrolled when user presses arrow up in the line of the top of the viewport. Set to 0 to let the scroll to be handled as default by Etherpad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FOCUS_LINE_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time (in milliseconds) used to animate the scroll transition. Set to 0 to disable animation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FOCUS_LINE_CARET_SCROLL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag to control if it should scroll when user places the caret in the last line of the viewport</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SOCKETIO_MAX_HTTP_BUFFER_SIZE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum size (in bytes) of a single message accepted via Socket.IO. If a client sends a larger message, its connection gets closed to prevent DoS (memory exhaustion) attacks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOAD_TEST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow Load Testing tools to hit the Etherpad Instance. WARNING: this will disable security on the instance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DUMP_ON_UNCLEAN_EXIT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable dumping objects preventing a clean exit of Node.js. WARNING: this has a significant performance impact.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPOSE_VERSION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expose Etherpad version in the web interface and in the Server http header. Do not enable on production machines.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_2">Examples</h4>
<div class="paragraph">
<p>Use a Postgres database, no admin user enabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -d \
	--name etherpad         \
	-p 9001:9001            \
	-e 'DB_TYPE=postgres'   \
	-e 'DB_HOST=db.local'   \
	-e 'DB_PORT=4321'       \
	-e 'DB_NAME=etherpad'   \
	-e 'DB_USER=dbusername' \
	-e 'DB_PASS=mypassword' \
	etherpad/etherpad</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run enabling the administrative user <code>admin</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -d \
	--name etherpad \
	-p 9001:9001 \
	-e 'ADMIN_PASSWORD=supersecret' \
	etherpad/etherpad</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run a test instance running DirtyDB on a persistent volume:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -d \
	-v etherpad_data:/opt/etherpad-lite/var \
	-p 9001:9001 \
	etherpad/etherpad</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_skins_2">Skins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can customize Etherpad appearance using skins.
A skin is a directory located under <code>static/skins/&lt;skin_name&gt;</code>, with the following contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>index.js</code>: javascript that will be run in <code>/</code></p>
</li>
<li>
<p><code>index.css</code>: stylesheet affecting <code>/</code></p>
</li>
<li>
<p><code>pad.js</code>: javascript that will be run in <code>/p/:padid</code></p>
</li>
<li>
<p><code>pad.css</code>: stylesheet affecting <code>/p/:padid</code></p>
</li>
<li>
<p><code>timeslider.js</code>: javascript that will be run in <code>/p/:padid/timeslider</code></p>
</li>
<li>
<p><code>timeslider.css</code>: stylesheet affecting <code>/p/:padid/timeslider</code></p>
</li>
<li>
<p><code>favicon.ico</code>: overrides the default favicon</p>
</li>
<li>
<p><code>robots.txt</code>: overrides the default <code>robots.txt</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can choose a skin changing the parameter <code>skinName</code> in <code>settings.json</code>.</p>
</div>
<div class="paragraph">
<p>Since Etherpad <strong>1.7.5</strong>, two skins are included:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>no-skin</code>: an empty skin, leaving the default Etherpad appearance unchanged, that you can use as a guidance to develop your own.</p>
</li>
<li>
<p><code>colibris</code>: a new, experimental skin, that will become the default in Etherpad 2.0.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embed_parameters">Embed parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can easily embed your etherpad-lite into any webpage by using iframes. You can configure the embedded pad using embed parameters.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>Cut and paste the following code into any webpage to embed a pad. The parameters below will hide the chat and the line numbers and will auto-focus on Line 4.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;iframe src='http://pad.test.de/p/PAD_NAME#L4?showChat=false&amp;showLineNumbers=false' width=600 height=400&gt;&lt;/iframe&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_showlinenumbers">showLineNumbers</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: true</p>
</div>
</div>
<div class="sect2">
<h3 id="_showcontrols">showControls</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: true</p>
</div>
</div>
<div class="sect2">
<h3 id="_showchat">showChat</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: true</p>
</div>
</div>
<div class="sect2">
<h3 id="_usemonospacefont">useMonospaceFont</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="_username">userName</h3>
<div class="ulist">
<ul>
<li>
<p>String</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: "unnamed"</p>
</div>
<div class="paragraph">
<p>Example: <code>userName=Etherpad%20User</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_usercolor">userColor</h3>
<div class="ulist">
<ul>
<li>
<p>String (css hex color value)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: randomly chosen by pad server</p>
</div>
<div class="paragraph">
<p>Example: <code>userColor=%23ff9900</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_nocolors">noColors</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="_alwaysshowchat">alwaysShowChat</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: false</p>
</div>
</div>
<div class="sect2">
<h3 id="_lang">lang</h3>
<div class="ulist">
<ul>
<li>
<p>String</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: en</p>
</div>
<div class="paragraph">
<p>Example: <code>lang=ar</code> (translates the interface into Arabic)</p>
</div>
</div>
<div class="sect2">
<h3 id="_rtl">rtl</h3>
<div class="ulist">
<ul>
<li>
<p>Boolean</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: true
Displays pad text from right to left.</p>
</div>
</div>
<div class="sect2">
<h3 id="_l">#L</h3>
<div class="ulist">
<ul>
<li>
<p>Int</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default: 0
Focuses pad at specific line number and places caret at beginning of this line
Special note: Is not a URL parameter but instead of a Hash value</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_api">HTTP API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_can_i_do_with_this_api">What can I do with this API?</h3>
<div class="paragraph">
<p>The API gives another web application control of the pads. The basic functions are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create/delete pads</p>
</li>
<li>
<p>grant/forbid access to pads</p>
</li>
<li>
<p>get/set pad content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The API is designed in a way, so you can reuse your existing user system with their permissions, and map it to Etherpad. Means: Your web application still has to do authentication, but you can tell Etherpad via the api, which visitors should get which permissions. This allows Etherpad to fit into any web application and extend it with real-time functionality. You can embed the pads via an iframe into your website.</p>
</div>
<div class="paragraph">
<p>Take a look at <a href="https://github.com/ether/etherpad-lite/wiki/HTTP-API-client-libraries">HTTP API client libraries</a> to check if a library in your favorite programming language is available.</p>
</div>
<div class="sect3">
<h4 id="_openapi">OpenAPI</h4>
<div class="paragraph">
<p>OpenAPI (formerly swagger) definitions are exposed under <code>/api/openapi.json</code> (latest) and <code>/api/1.9.5/openapi.json</code>. You can use official tools like <a href="https://editor.swagger.io/">Swagger Editor</a> to view and explore them.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_examples_3">Examples</h3>
<div class="sect3">
<h4 id="_example_1">Example 1</h4>
<div class="paragraph">
<p>A portal (such as WordPress) wants to give a user access to a new pad. Let&#8217;s assume the user have the internal id 7 and his name is michael.</p>
</div>
<div class="paragraph">
<p>Portal maps the internal userid to an etherpad author.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Request: <code><a href="http://pad.domain/api/1/createAuthorIfNotExistsFor?apikey=secret&amp;name=Michael&amp;authorMapper=7" class="bare">http://pad.domain/api/1/createAuthorIfNotExistsFor?apikey=secret&amp;name=Michael&amp;authorMapper=7</a></code></p>
</div>
<div class="paragraph">
<p>Response: <code>{code: 0, message:"ok", data: {authorID: "a.s8oes9dhwrvt0zif"}}</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Portal maps the internal userid to an etherpad group:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Request: <code><a href="http://pad.domain/api/1/createGroupIfNotExistsFor?apikey=secret&amp;groupMapper=7" class="bare">http://pad.domain/api/1/createGroupIfNotExistsFor?apikey=secret&amp;groupMapper=7</a></code></p>
</div>
<div class="paragraph">
<p>Response: <code>{code: 0, message:"ok", data: {groupID: "g.s8oes9dhwrvt0zif"}}</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Portal creates a pad in the userGroup</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Request: <code><a href="http://pad.domain/api/1/createGroupPad?apikey=secret&amp;groupID=g.s8oes9dhwrvt0zif&amp;padName=samplePad&amp;text=This" class="bare">http://pad.domain/api/1/createGroupPad?apikey=secret&amp;groupID=g.s8oes9dhwrvt0zif&amp;padName=samplePad&amp;text=This</a> is the first sentence in the pad</code></p>
</div>
<div class="paragraph">
<p>Response: <code>{code: 0, message:"ok", data: null}</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Portal starts the session for the user on the group:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Request: <code><a href="http://pad.domain/api/1/createSession?apikey=secret&amp;groupID=g.s8oes9dhwrvt0zif&amp;authorID=a.s8oes9dhwrvt0zif&amp;validUntil=1312201246" class="bare">http://pad.domain/api/1/createSession?apikey=secret&amp;groupID=g.s8oes9dhwrvt0zif&amp;authorID=a.s8oes9dhwrvt0zif&amp;validUntil=1312201246</a></code></p>
</div>
<div class="paragraph">
<p>Response: <code>{"data":{"sessionID": "s.s8oes9dhwrvt0zif"}}</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Portal places the cookie "sessionID" with the given value on the client and creates an iframe including the pad.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_2">Example 2</h4>
<div class="paragraph">
<p>A portal (such as WordPress) wants to transform the contents of a pad that multiple admins edited into a blog post.</p>
</div>
<div class="paragraph">
<p>Portal retrieves the contents of the pad for entry into the db as a blog post:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Request: <code><a href="http://pad.domain/api/1/getText?apikey=secret&amp;padID=g.s8oes9dhwrvt0zif$123" class="bare">http://pad.domain/api/1/getText?apikey=secret&amp;padID=g.s8oes9dhwrvt0zif$123</a></code></p>
</div>
<div class="paragraph">
<p>Response: <code>{code: 0, message:"ok", data: {text:"Welcome Text"}}</code></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Portal submits content into new blog post</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Portal.AddNewBlog(content)</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_usage">Usage</h3>
<div class="sect3">
<h4 id="_api_version">API version</h4>
<div class="paragraph">
<p>The latest version is <code>1.2.15</code></p>
</div>
<div class="paragraph">
<p>The current version can be queried via /api.</p>
</div>
</div>
<div class="sect3">
<h4 id="_request_format">Request Format</h4>
<div class="paragraph">
<p>The API is accessible via HTTP. Starting from <strong>1.8</strong>, API endpoints can be invoked indifferently via GET or POST.</p>
</div>
<div class="paragraph">
<p>The URL of the HTTP request is of the form: <code>/api/$APIVERSION/$FUNCTIONNAME</code>. $APIVERSION depends on the endpoint you want to use. Depending on the verb you use (GET or POST) <strong>parameters</strong> can be passed differently.</p>
</div>
<div class="paragraph">
<p>When invoking via GET (mandatory until <strong>1.7.5</strong> included), parameters must be included in the query string (example: <code>/api/$APIVERSION/$FUNCTIONNAME?apikey=&lt;APIKEY&gt;&amp;param1=value1</code>). Please note that starting with nodejs 8.14+ the total size of HTTP request headers has been capped to 8192 bytes. This limits the quantity of data that can be sent in an API request.</p>
</div>
<div class="paragraph">
<p>Starting from Etherpad <strong>1.8</strong> it is also possible to invoke the HTTP API via POST. In this case, querystring parameters will still be accepted, but <strong>any parameter with the same name sent via POST will take precedence</strong>. If you need to send large chunks of text (for example, for <code>setText()</code>) it is advisable to invoke via POST.</p>
</div>
<div class="paragraph">
<p>Example with cURL using GET (toy example, no encoding):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl "http://pad.domain/api/1/setText?apikey=secret&amp;padID=padname&amp;text=this_text_will_NOT_be_encoded_by_curl_use_next_example"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example with cURL using GET (better example, encodes text):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl "http://pad.domain/api/1/setText?apikey=secret&amp;padID=padname" --get --data-urlencode "text=Text sent via GET with proper encoding. For big documents, please use POST"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example with cURL using POST:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl "http://pad.domain/api/1/setText?apikey=secret&amp;padID=padname" --data-urlencode "text=Text sent via POST with proper encoding. For big texts (&gt;8 KB), use this method"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_format">Response Format</h4>
<div class="paragraph">
<p>Responses are valid JSON in the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsonlines hljs" data-lang="jsonlines">{
  "code": number,
  "message": string,
  "data": obj
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>code</strong> a return code</p>
</li>
<li>
<p><strong>0</strong> everything ok</p>
</li>
<li>
<p><strong>1</strong> wrong parameters</p>
</li>
<li>
<p><strong>2</strong> internal error</p>
</li>
<li>
<p><strong>3</strong> no such function</p>
</li>
<li>
<p><strong>4</strong> no or wrong API Key</p>
</li>
<li>
<p><strong>message</strong> a status message. It&#8217;s ok if everything is fine, else it contains an error message</p>
</li>
<li>
<p><strong>data</strong> the payload</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_overview">Overview</h4>
<div class="imageblock">
<div class="content">
<img src="https://i.imgur.com/d0nWp.png" alt="API Overview">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_types">Data Types</h3>
<div class="ulist">
<ul>
<li>
<p><strong>groupID</strong>  a string, the unique id of a group. Format is g.16RANDOMCHARS, for example g.s8oes9dhwrvt0zif</p>
</li>
<li>
<p><strong>sessionID</strong> a string, the unique id of a session. Format is s.16RANDOMCHARS, for example s.s8oes9dhwrvt0zif</p>
</li>
<li>
<p><strong>authorID</strong> a string, the unique id of an author. Format is a.16RANDOMCHARS, for example a.s8oes9dhwrvt0zif</p>
</li>
<li>
<p><strong>readOnlyID</strong> a string, the unique id of a readonly relation to a pad. Format is r.16RANDOMCHARS, for example r.s8oes9dhwrvt0zif</p>
</li>
<li>
<p><strong>padID</strong> a string, format is GROUPID$PADNAME, for example the pad test of group g.s8oes9dhwrvt0zif has padID g.s8oes9dhwrvt0zif$test</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_authentication">Authentication</h4>
<div class="paragraph">
<p>Authentication works via a token that is sent with each request as a post parameter.  There is a single token per Etherpad deployment.  This token will be random string, generated by Etherpad at the first start. It will be saved in APIKEY.txt in the root folder of Etherpad. Only Etherpad and the requesting application knows this key. Token management will not be exposed through this API.</p>
</div>
</div>
<div class="sect3">
<h4 id="_node_interoperability">Node Interoperability</h4>
<div class="paragraph">
<p>All functions will also be available through a node module accessible from other node.js applications.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_methods">API Methods</h3>
<div class="sect3">
<h4 id="_groups">Groups</h4>
<div class="paragraph">
<p>Pads can belong to a group. The padID of grouppads is starting with a groupID like g.asdfasdfasdfasdf$test</p>
</div>
<div class="sect4">
<h5 id="_creategroup">createGroup()</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>creates a new group</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {groupID: g.s8oes9dhwrvt0zif}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_creategroupifnotexistsforgroupmapper">createGroupIfNotExistsFor(groupMapper)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>this functions helps you to map your application group ids to Etherpad group ids</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {groupID: g.s8oes9dhwrvt0zif}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_deletegroupgroupid">deleteGroup(groupID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>deletes a group</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"groupID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_listpadsgroupid">listPads(groupID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns all pads of this group</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padIDs : ["g.s8oes9dhwrvt0zif$test", "g.s8oes9dhwrvt0zif$test2"]}</code></p>
</li>
<li>
<p><code>{code: 1, message:"groupID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_creategrouppadgroupid_padname_text_authorid">createGroupPad(groupID, padName, [text], [authorId])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>creates a new pad in this group</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padID: "g.s8oes9dhwrvt0zif$test"}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padName does already exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"groupID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_listallgroups">listAllGroups()</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>lists all existing groups</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {groupIDs: ["g.mKjkmnAbSMtCt8eL", "g.3ADWx6sbGuAiUmCy"]}}</code></p>
</li>
<li>
<p><code>{code: 0, message:"ok", data: {groupIDs: []}}</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_author">Author</h4>
<div class="paragraph">
<p>These authors are bound to the attributes the users choose (color and name).</p>
</div>
<div class="sect4">
<h5 id="_createauthorname">createAuthor([name])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>creates a new author</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {authorID: "a.s8oes9dhwrvt0zif"}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_createauthorifnotexistsforauthormapper_name">createAuthorIfNotExistsFor(authorMapper [, name])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>this functions helps you to map your application author ids to Etherpad author ids</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {authorID: "a.s8oes9dhwrvt0zif"}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_listpadsofauthorauthorid">listPadsOfAuthor(authorID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns an array of all pads this author contributed to</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padIDs: ["g.s8oes9dhwrvt0zif$test", "g.s8oejklhwrvt0zif$foo"]}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"authorID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_getauthornameauthorid">getAuthorName(authorID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Returns the Author Name of the author</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {authorName: "John McLear"}}</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#8594; can&#8217;t be deleted cause this would involve scanning all the pads where this author was</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_session">Session</h4>
<div class="paragraph">
<p>Sessions can be created between a group and an author. This allows an author to access more than one group. The sessionID will be set as a cookie to the client and is valid until a certain date. The session cookie can also contain multiple comma-separated sessionIDs, allowing a user to edit pads in different groups at the same time. Only users with a valid session for this group, can access group pads. You can create a session after you authenticated the user at your web application, to give them access to the pads. You should save the sessionID of this session and delete it after the user logged out.</p>
</div>
<div class="sect4">
<h5 id="_createsessiongroupid_authorid_validuntil">createSession(groupID, authorID, validUntil)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>creates a new session. validUntil is an unix timestamp in seconds</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {sessionID: "s.s8oes9dhwrvt0zif"}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"groupID doesn&#8217;t exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"authorID doesn&#8217;t exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"validUntil is in the past", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_deletesessionsessionid">deleteSession(sessionID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>deletes a session</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"sessionID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_getsessioninfosessionid">getSessionInfo(sessionID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns information about a session</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {authorID: "a.s8oes9dhwrvt0zif", groupID: g.s8oes9dhwrvt0zif, validUntil: 1312201246}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"sessionID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_listsessionsofgroupgroupid">listSessionsOfGroup(groupID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns all sessions of a group</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{"code":0,"message":"ok","data":{"s.oxf2ras6lvhv2132":{"groupID":"g.s8oes9dhwrvt0zif","authorID":"a.akf8finncvomlqva","validUntil":2312905480}}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"groupID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_listsessionsofauthorauthorid">listSessionsOfAuthor(authorID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns all sessions of an author</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{"code":0,"message":"ok","data":{"s.oxf2ras6lvhv2132":{"groupID":"g.s8oes9dhwrvt0zif","authorID":"a.akf8finncvomlqva","validUntil":2312905480}}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"authorID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pad_content">Pad Content</h4>
<div class="paragraph">
<p>Pad content can be updated and retrieved through the API</p>
</div>
<div class="sect4">
<h5 id="_gettextpadid_rev">getText(padID, [rev])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the text of a pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {text:"Welcome Text"}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_settextpadid_text_authorid">setText(padID, text, [authorId])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sets the text of a pad.</p>
</div>
<div class="paragraph">
<p>If your text is long (&gt;8 KB), please invoke via POST and include <code>text</code> parameter in the body of the request, not in the URL (since Etherpad <strong>1.8</strong>).</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"text too long", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_appendtextpadid_text_authorid">appendText(padID, text, [authorId])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.13</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Appends text to a pad.</p>
</div>
<div class="paragraph">
<p>If your text is long (&gt;8 KB), please invoke via POST and include <code>text</code> parameter in the body of the request, not in the URL (since Etherpad <strong>1.8</strong>).</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"text too long", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_gethtmlpadid_rev">getHTML(padID, [rev])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the text of a pad formatted as HTML</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {html:"Welcome Text&lt;br&gt;More Text"}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sethtmlpadid_html_authorid">setHTML(padID, html, [authorId])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>sets the text of a pad based on HTML, HTML must be well-formed. Malformed HTML will send a warning to the API log.</p>
</div>
<div class="paragraph">
<p>If <code>html</code> is long (&gt;8 KB), please invoke via POST and include <code>html</code> parameter in the body of the request, not in the URL (since Etherpad <strong>1.8</strong>).</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_getattributepoolpadid">getAttributePool(padID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the attribute pool of a pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{ "code":0,
  "message":"ok",
  "data": {
    "pool":{
      "numToAttrib":{
        "0":["author","a.X4m8bBWJBZJnWGSh"],
        "1":["author","a.TotfBPzov54ihMdH"],
        "2":["author","a.StiblqrzgeNTbK05"],
        "3":["bold","true"]
      },
      "attribToNum":{
        "author,a.X4m8bBWJBZJnWGSh":0,
        "author,a.TotfBPzov54ihMdH":1,
        "author,a.StiblqrzgeNTbK05":2,
        "bold,true":3
      },
      "nextNum":4
    }
  }
}</code></p>
</li>
<li>
<p><code>{"code":1,"message":"padID does not exist","data":null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_getrevisionchangesetpadid_rev">getRevisionChangeset(padID, [rev])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>get the changeset at a given revision, or last revision if 'rev' is not defined.</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{ "code" : 0,
  "message" : "ok",
  "data" : "Z:1&gt;6b|5+6b$Welcome to Etherpad!\n\nThis pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!\n\nGet involved with Etherpad at <a href="https://etherpad.org\n"" class="bare">https://etherpad.org\n"</a>
}</code></p>
</li>
<li>
<p><code>{"code":1,"message":"padID does not exist","data":null}</code></p>
</li>
<li>
<p><code>{"code":1,"message":"rev is higher than the head revision of the pad","data":null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_creatediffhtmlpadid_startrev_endrev">createDiffHTML(padID, startRev, endRev)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.7</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns an object of diffs from 2 points in a pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{"code":0,"message":"ok","data":{"html":"&lt;style&gt;\n.authora_HKIv23mEbachFYfH {background-color: #a979d9}\n.authora_n4gEeMLsv1GivNeh {background-color: #a9b5d9}\n.removed {text-decoration: line-through; -ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=80)'; filter: alpha(opacity=80); opacity: 0.8; }\n&lt;/style&gt;Welcome to Etherpad!&lt;br&gt;&lt;br&gt;This pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!&lt;br&gt;&lt;br&gt;Get involved with Etherpad at &lt;a href=\"http&#x3a;&#x2F;&#x2F;etherpad&#x2e;org\"&gt;http:&#x2F;&#x2F;etherpad.org&lt;/a&gt;&lt;br&gt;&lt;span class=\"authora_HKIv23mEbachFYfH\"&gt;aw&lt;/span&gt;&lt;br&gt;&lt;br&gt;","authors":["a.HKIv23mEbachFYfH",""]}}</code></p>
</li>
<li>
<p><code>{"code":4,"message":"no or wrong API Key","data":null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_restorerevisionpadid_rev_authorid">restoreRevision(padId, rev, [authorId])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.11</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Restores revision from past as new changeset</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>{code:0, message:"ok", data:null}</p>
</li>
<li>
<p>{code: 1, message:"padID does not exist", data: null}</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chat">Chat</h4>
<div class="sect4">
<h5 id="_getchathistorypadid_start_end">getChatHistory(padID, [start, end])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.7</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a part of the chat history, when <code>start</code> and <code>end</code> are given</p>
</li>
<li>
<p>the whole chat history, when no extra parameters are given</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{"code":0,"message":"ok","data":{"messages":[{"text":"foo","userId":"a.foo","time":1359199533759,"userName":"test"},{"text":"bar","userId":"a.foo","time":1359199534622,"userName":"test"}]}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"start is higher or equal to the current chatHead", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_getchatheadpadid">getChatHead(padID)</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.7</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the chatHead (last number of the last chat-message) of the pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {chatHead: 42}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_appendchatmessagepadid_text_authorid_time">appendChatMessage(padID, text, authorID [, time])</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.12</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>creates a chat message, saves it to the database and sends it to all connected clients of this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"text is no string", data: null}</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pad">Pad</h3>
<div class="paragraph">
<p>Group pads are normal pads, but with the name schema GROUPID$PADNAME. A security manager controls access of them and it&#8217;s forbidden for normal pads to include a $ in the name.</p>
</div>
<div class="sect3">
<h4 id="_createpadpadid_text_authorid">createPad(padID, [text], [authorId])</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>creates a new (non-group) pad.  Note that if you need to create a group Pad, you should call <strong>createGroupPad</strong>.
You get an error message if you use one of the following characters in the padID: "/", "?", "&amp;" or "#".</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does already exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"malformed padID: Remove special characters", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getrevisionscountpadid">getRevisionsCount(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the number of revisions of this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {revisions: 56}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getsavedrevisionscountpadid">getSavedRevisionsCount(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.11</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the number of saved revisions of this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {savedRevisions: 42}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_listsavedrevisionspadid">listSavedRevisions(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.11</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the list of saved revisions of this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {savedRevisions: [2, 42, 1337]}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_saverevisionpadid_rev">saveRevision(padID [, rev])</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.11</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>saves a revision</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_paduserscountpadid">padUsersCount(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the number of user that are currently editing this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padUsersCount: 5}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_paduserspadid">padUsers(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the list of users that are currently editing this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padUsers: [{colorId:"#c1a9d9","name":"username1","timestamp":1345228793126,"id":"a.n4gEeMLsvg12452n"},{"colorId":"#d9a9cd","name":"Hmmm","timestamp":1345228796042,"id":"a.n4gEeMLsvg12452n"}]}}</code></p>
</li>
<li>
<p><code>{code: 0, message:"ok", data: {padUsers: []}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_deletepadpadid">deletePad(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>deletes a pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_copypadsourceid_destinationid_forcefalse">copyPad(sourceID, destinationID[, force=false])</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>copies a pad with full history and chat. If force is true and the destination pad exists, it will be overwritten.</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_copypadwithouthistorysourceid_destinationid_forcefalse_authorid">copyPadWithoutHistory(sourceID, destinationID, [force=false], [authorId])</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.15</p>
</li>
<li>
<p><code>authorId</code> in API &gt;= 1.3.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>copies a pad without copying the history and chat. If force is true and the destination pad exists, it will be overwritten.
Note that all the revisions will be lost! In most of the cases one should use <code>copyPad</code> API instead.</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_movepadsourceid_destinationid_forcefalse">movePad(sourceID, destinationID[, force=false])</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>moves a pad. If force is true and the destination pad exists, it will be overwritten.</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getreadonlyidpadid">getReadOnlyID(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the read only link of a pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {readOnlyID: "r.s8oes9dhwrvt0zif"}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getpadidreadonlyid">getPadID(readOnlyID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.10</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the id of a pad which is assigned to the readOnlyID</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padID: "p.s8oes9dhwrvt0zif"}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_setpublicstatuspadid_publicstatus">setPublicStatus(padID, publicStatus)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>sets a boolean for the public status of a group pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"You can only get/set the publicStatus of pads that belong to a group", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getpublicstatuspadid">getPublicStatus(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>return true of false</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {publicStatus: true}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
<li>
<p><code>{code: 1, message:"You can only get/set the publicStatus of pads that belong to a group", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_listauthorsofpadpadid">listAuthorsOfPad(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns an array of authors who contributed to this pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {authorIDs : ["a.s8oes9dhwrvt0zif", "a.akf8finncvomlqva"]}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getlasteditedpadid">getLastEdited(padID)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns the timestamp of the last revision of the pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {lastEdited: 1340815946602}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sendclientsmessagepadid_msg">sendClientsMessage(padID, msg)</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>sends a custom message of type <code>msg</code> to the pad</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {}}</code></p>
</li>
<li>
<p><code>{code: 1, message:"padID does not exist", data: null}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_checktoken">checkToken()</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>returns ok when the current api token is valid</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{"code":0,"message":"ok","data":null}</code></p>
</li>
<li>
<p><code>{"code":4,"message":"no or wrong API Key","data":null}</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pads">Pads</h3>
<div class="sect3">
<h4 id="_listallpads">listAllPads()</h4>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>lists all pads on this epl instance</p>
</div>
<div class="paragraph">
<p><em>Example returns:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{code: 0, message:"ok", data: {padIDs: ["testPad", "thePadsOfTheOthers"]}}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_global">Global</h4>
<div class="sect4">
<h5 id="_getstats">getStats()</h5>
<div class="ulist">
<ul>
<li>
<p>API &gt;= 1.2.14</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>get stats of the etherpad instance</p>
</div>
<div class="paragraph">
<p><em>Example returns</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{"code":0,"message":"ok","data":{"totalPads":3,"totalSessions": 2,"totalActivePads": 1}}</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hooks">Hooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A hook function is registered with a hook via the plugin&#8217;s <code>ep.json</code> file. See
the Plugins section for details. A hook may have many registered functions from
different plugins.</p>
</div>
<div class="paragraph">
<p>Some hooks call their registered functions one at a time until one of them
returns a value. Others always call all of their registered functions and
combine the results (if applicable).</p>
</div>
<div class="sect2">
<h3 id="_registered_hook_functions">Registered hook functions</h3>
<div class="paragraph">
<p>Note: The documentation in this section applies to every hook unless the
hook-specific documentation says otherwise.</p>
</div>
<div class="sect3">
<h4 id="_arguments">Arguments</h4>
<div class="paragraph">
<p>Hook functions are called with three arguments:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>hookName</code> - The name of the hook being invoked.</p>
</li>
<li>
<p><code>context</code> - An object with some relevant information about the context of the
call. See the hook-specific documentation for details.</p>
</li>
<li>
<p><code>cb</code> - For asynchronous operations this callback can be called to signal
completion and optionally provide a return value. The callback takes a single
argument, the meaning of which depends on the hook (see the "Return values"
section for general information that applies to most hooks). This callback
always returns <code>undefined</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_expected_behavior">Expected behavior</h4>
<div class="paragraph">
<p>The presence of a callback parameter suggests that every hook function can run
asynchronously. While that is the eventual goal, there are some legacy hooks
that expect their hook functions to provide a value synchronously. For such
hooks, the hook functions must do one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Call the callback with a non-Promise value (<code>undefined</code> is acceptable) and
return <code>undefined</code>, in that order.</p>
</li>
<li>
<p>Return a non-Promise value other than <code>undefined</code> (<code>null</code> is acceptable) and
never call the callback. Note that <code>async</code> functions <strong>always</strong> return a
Promise, so they must never be used for synchronous hooks.</p>
</li>
<li>
<p>Only have two parameters (<code>hookName</code> and <code>context</code>) and return any non-Promise
value (<code>undefined</code> is acceptable).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For hooks that permit asynchronous behavior, the hook functions must do one or
more of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return <code>undefined</code> and call the callback, in either order.</p>
</li>
<li>
<p>Return something other than <code>undefined</code> (<code>null</code> is acceptable) and never call
the callback. Note that <code>async</code> functions <strong>always</strong> return a Promise, so they
must never call the callback.</p>
</li>
<li>
<p>Only have two parameters (<code>hookName</code> and <code>context</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the acceptable behaviors for asynchronous hook functions is a superset
of the acceptable behaviors for synchronous hook functions.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The number of parameters is determined by examining
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/length">Function.length</a>,
which does not count <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters">default parameters</a>
or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">"rest" parameters</a>.
To avoid problems, do not use default or rest parameters when defining hook
functions.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_return_values">Return values</h4>
<div class="paragraph">
<p>A hook function can provide a value to Etherpad in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pass the desired value as the first argument to the callback.</p>
</li>
<li>
<p>Return the desired value directly. The value must not be <code>undefined</code> unless
the hook function only has two parameters. (Hook functions with three
parameters that want to provide <code>undefined</code> should instead use the callback.)</p>
</li>
<li>
<p>For hooks that permit asynchronous behavior, return a Promise that resolves to
the desired value.</p>
</li>
<li>
<p>For hooks that permit asynchronous behavior, pass a Promise that resolves to
the desired value as the first argument to the callback.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.exampleOne = (hookName, context, callback) =&gt; {
  return 'valueOne';
};

exports.exampleTwo = (hookName, context, callback) =&gt; {
  callback('valueTwo');
  return;
};

// ONLY FOR HOOKS THAT PERMIT ASYNCHRONOUS BEHAVIOR
exports.exampleThree = (hookName, context, callback) =&gt; {
  return new Promise('valueThree');
};

// ONLY FOR HOOKS THAT PERMIT ASYNCHRONOUS BEHAVIOR
exports.exampleFour = (hookName, context, callback) =&gt; {
  callback(new Promise('valueFour'));
  return;
};

// ONLY FOR HOOKS THAT PERMIT ASYNCHRONOUS BEHAVIOR
exports.exampleFive = async (hookName, context) =&gt; {
  // Note that this function is async, so it actually returns a Promise that
  // is resolved to 'valueFive'.
  return 'valueFive';
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Etherpad collects the values provided by the hook functions into an array,
filters out all <code>undefined</code> values, then flattens the array one level.
Flattening one level makes it possible for a hook function to behave as if it
were multiple separate hook functions.</p>
</div>
<div class="paragraph">
<p>For example: Suppose a hook has eight registered functions that return the
following values: <code>1</code>, <code>[2]</code>, <code>['3a', '3b']</code> <code>[[4]]</code>, <code>undefined</code>,
<code>[undefined]</code>, <code>[]</code>, and <code>null</code>. The value returned to the caller of the hook is
<code>[1, 2, '3a', '3b', [4], undefined, null]</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_client_side_hooks">Client-side hooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most of these hooks are called during or in order to set up the formatting
process.</p>
</div>
<div class="sect2">
<h3 id="_documentready">documentReady</h3>
<div class="paragraph">
<p>Called from: src/templates/pad.html</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="paragraph">
<p>nothing</p>
</div>
<div class="paragraph">
<p>This hook proxies the functionality of jQuery&#8217;s <code>$(document).ready</code> event.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acedomlinepreprocesslineattributes">aceDomLinePreProcessLineAttributes</h3>
<div class="paragraph">
<p>Called from: src/static/js/domline.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>domline - The current DOM line being processed</p>
</li>
<li>
<p>cls - The class of the current block element (useful for styling)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called for elements in the DOM that have the "lineMarkerAttribute"
set. You can add elements into this category with the aceRegisterBlockElements
hook above. This hook is run BEFORE the numbered and ordered lists logic is
applied.</p>
</div>
<div class="paragraph">
<p>The return value of this hook should have the following structure:</p>
</div>
<div class="paragraph">
<p><code>{ preHtml: String, postHtml: String, processedMarker: Boolean }</code></p>
</div>
<div class="paragraph">
<p>The preHtml and postHtml values will be added to the HTML display of the
element, and if processedMarker is true, the engine won&#8217;t try to process it any
more.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acedomlineprocesslineattributes">aceDomLineProcessLineAttributes</h3>
<div class="paragraph">
<p>Called from: src/static/js/domline.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>domline - The current DOM line being processed</p>
</li>
<li>
<p>cls - The class of the current block element (useful for styling)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called for elements in the DOM that have the "lineMarkerAttribute"
set. You can add elements into this category with the aceRegisterBlockElements
hook above. This hook is run AFTER the ordered and numbered lists logic is
applied.</p>
</div>
<div class="paragraph">
<p>The return value of this hook should have the following structure:</p>
</div>
<div class="paragraph">
<p><code>{ preHtml: String, postHtml: String, processedMarker: Boolean }</code></p>
</div>
<div class="paragraph">
<p>The preHtml and postHtml values will be added to the HTML display of the
element, and if processedMarker is true, the engine won&#8217;t try to process it any
more.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acecreatedomline">aceCreateDomLine</h3>
<div class="paragraph">
<p>Called from: src/static/js/domline.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>domline - the current DOM line being processed</p>
</li>
<li>
<p>cls - The class of the current element (useful for styling)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called for any line being processed by the formatting engine,
unless the aceDomLineProcessLineAttributes hook from above returned true, in
which case this hook is skipped.</p>
</div>
<div class="paragraph">
<p>The return value of this hook should have the following structure:</p>
</div>
<div class="paragraph">
<p><code>{ extraOpenTags: String, extraCloseTags: String, cls: String }</code></p>
</div>
<div class="paragraph">
<p>extraOpenTags and extraCloseTags will be added before and after the element in
question, and cls will be the new class of the element going forward.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acepostwritedomlinehtml">acePostWriteDomLineHTML</h3>
<div class="paragraph">
<p>Called from: src/static/js/domline.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>node - the DOM node that just got written to the page</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is for right after a node has been fully formatted and written to the
page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceattribstoclasses">aceAttribsToClasses</h3>
<div class="paragraph">
<p>Called from: src/static/js/linestylefilter.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>linestylefilter - the JavaScript object that&#8217;s currently processing the ace
attributes</p>
</li>
<li>
<p>key - the current attribute being processed</p>
</li>
<li>
<p>value - the value of the attribute being processed</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called during the attribute processing procedure, and should be
used to translate key, value pairs into valid HTML classes that can be inserted
into the DOM.</p>
</div>
<div class="paragraph">
<p>The return value for this function should be a list of classes, which will then
be parsed into a valid class string.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceattribclasses">aceAttribClasses</h3>
<div class="paragraph">
<p>Called from: src/static/js/linestylefilter.js</p>
</div>
<div class="paragraph">
<p>Things in context:
1. Attributes - Object of Attributes</p>
</div>
<div class="paragraph">
<p>This hook is called when attributes are investigated on a line. It is useful if
you want to add another attribute type or property type to a pad.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.aceAttribClasses = function(hook_name, attr, cb){
  attr.sub = 'tag:sub';
  cb(attr);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_acegetfilterstack">aceGetFilterStack</h3>
<div class="paragraph">
<p>Called from: src/static/js/linestylefilter.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>linestylefilter - the JavaScript object that&#8217;s currently processing the ace
attributes</p>
</li>
<li>
<p>browser - an object indicating which browser is accessing the page</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called to apply custom regular expression filters to a set of
styles. The one example available is the ep_linkify plugin, which adds internal
links. They use it to find the telltale <code>[[ ]]</code> syntax that signifies internal
links, and finding that syntax, they add in the internalHref attribute to be
later used by the aceCreateDomLine hook (documented above).</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceeditorcss">aceEditorCSS</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace.js</p>
</div>
<div class="paragraph">
<p>Things in context: None</p>
</div>
<div class="paragraph">
<p>This hook is provided to allow custom CSS files to be loaded. The return value
should be an array of resource urls or paths relative to the plugins directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceinitinnerdocbodyhead">aceInitInnerdocbodyHead</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>iframeHTML - the HTML of the editor iframe up to this point, in array format</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called during the creation of the editor HTML. The array should
have lines of HTML added to it, giving the plugin author a chance to add in
meta, script, link, and other tags that go into the <code>&lt;head&gt;</code> element of the
editor HTML document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceeditevent">aceEditEvent</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>callstack - a bunch of information about the current action</p>
</li>
<li>
<p>editorInfo - information about the user who is making the change</p>
</li>
<li>
<p>rep - information about where the change is being made</p>
</li>
<li>
<p>documentAttributeManager - information about attributes in the document (this
is a mystery to me)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is made available to edit the edit events that might occur when
changes are made. Currently you can change the editor information, some of the
meanings of the edit, and so on. You can also make internal changes (internal to
your plugin) that use the information provided by the edit event.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceregisternonscrollableeditevents">aceRegisterNonScrollableEditEvents</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context: None</p>
</div>
<div class="paragraph">
<p>When aceEditEvent (documented above) finishes processing the event, it scrolls
the viewport to make caret visible to the user, but if you don&#8217;t want that
behavior to happen you can use this hook to register which edit events should
not scroll viewport. The return value of this hook should be a list of event
names.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.aceRegisterNonScrollableEditEvents = function(){
  return [ 'repaginate', 'updatePageCount' ];
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aceregisterblockelements">aceRegisterBlockElements</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context: None</p>
</div>
<div class="paragraph">
<p>The return value of this hook will add elements into the "lineMarkerAttribute"
category, making the aceDomLineProcessLineAttributes hook (documented below)
call for those elements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceinitialized">aceInitialized</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>editorInfo - information about the user who will be making changes through
the interface, and a way to insert functions into the main ace object (see
ep_headings)</p>
</li>
<li>
<p>rep - information about where the user&#8217;s cursor is</p>
</li>
<li>
<p>documentAttributeManager - some kind of magic</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is for inserting further information into the ace engine, for later
use in formatting hooks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_postaceinit">postAceInit</h3>
<div class="paragraph">
<p>Called from: src/static/js/pad.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ace - the ace object that is applied to this editor.</p>
</li>
<li>
<p>clientVars - Object containing client-side configuration such as author ID
and plugin settings. Your plugin can manipulate this object via the
<code>clientVars</code> server-side hook.</p>
</li>
<li>
<p>pad - the pad object of the current pad.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_posttoolbarinit">postToolbarInit</h3>
<div class="paragraph">
<p>Called from: src/static/js/pad_editbar.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ace - the ace object that is applied to this editor.</p>
</li>
<li>
<p>toolbar - Editbar instance. See below for the Editbar documentation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Can be used to register custom actions to the toolbar.</p>
</div>
<div class="paragraph">
<p>Usage examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/tiblu/ep_authorship_toggle" class="bare">https://github.com/tiblu/ep_authorship_toggle</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_posttimesliderinit">postTimesliderInit</h3>
<div class="paragraph">
<p>Called from: src/static/js/timeslider.js</p>
</div>
<div class="paragraph">
<p>There doesn&#8217;t appear to be any example available of this particular hook being
used, but it gets fired after the timeslider is all set up.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gotorevisionevent">goToRevisionEvent</h3>
<div class="paragraph">
<p>Called from: src/static/js/broadcast.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>rev - The newRevision</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook gets fired both on timeslider load (as timeslider shows a new
revision) and when the new revision is showed to a user. There doesn&#8217;t appear to
be any example available of this particular hook being used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_userjoinorupdate">userJoinOrUpdate</h3>
<div class="paragraph">
<p>Called from: src/static/js/pad_userlist.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>info - the user information</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called on the client side whenever a user joins or changes. This
can be used to create notifications or an alternate user list.</p>
</div>
</div>
<div class="sect2">
<h3 id="_chatnewmessage">chatNewMessage</h3>
<div class="paragraph">
<p>Called from: <code>src/static/js/chat.js</code></p>
</div>
<div class="paragraph">
<p>This hook runs on the client side whenever a chat message is received from the
server. It can be used to create different notifications for chat messages. Hook
functions can modify the <code>author</code>, <code>authorName</code>, <code>duration</code>, <code>rendered</code>,
<code>sticky</code>, <code>text</code>, and <code>timeStr</code> context properties to change how the message is
processed. The <code>text</code> and <code>timeStr</code> properties may contain HTML and come
pre-sanitized; plugins should be careful to sanitize any added user input to
avoid introducing an XSS vulnerability.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>authorName</code>: The display name of the user that wrote the message.</p>
</li>
<li>
<p><code>author</code>: The author ID of the user that wrote the message.</p>
</li>
<li>
<p><code>text</code>: Sanitized message HTML, with URLs wrapped like <code>&lt;a
href="url"&gt;url&lt;/a&gt;</code>. (Note that <code>message.text</code> is not sanitized or processed
in any way.)</p>
</li>
<li>
<p><code>message</code>: The raw message object as received from the server, except with
time correction and a default <code>authorId</code> property if missing. Plugins must not
modify this object. Warning: Unlike <code>text</code>, <code>message.text</code> is not
pre-sanitized or processed in any way.</p>
</li>
<li>
<p><code>rendered</code> - Used to override the default message rendering. Initially set to
<code>null</code>. If the hook function sets this to a DOM element object or a jQuery
object, then that object will be used as the rendered message UI. Otherwise,
if this is set to <code>null</code>, then Etherpad will render a default UI for the
message using the other context properties.</p>
</li>
<li>
<p><code>sticky</code> (boolean): Whether the gritter notification should fade out on its
own or just sit there until manually closed.</p>
</li>
<li>
<p><code>timestamp</code>: When the chat message was sent (milliseconds since epoch),
corrected using the difference between the local clock and the server&#8217;s clock.</p>
</li>
<li>
<p><code>timeStr</code>: The message timestamp as a formatted string.</p>
</li>
<li>
<p><code>duration</code>: How long (in milliseconds) to display the gritter notification (0
to disable).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chatsendmessage">chatSendMessage</h3>
<div class="paragraph">
<p>Called from: <code>src/static/js/chat.js</code></p>
</div>
<div class="paragraph">
<p>This hook runs on the client side whenever the user sends a new chat message.
Plugins can mutate the message object to change the message text or add metadata
to control how the message will be rendered by the <code>chatNewMessage</code> hook.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>message</code>: The message object that will be sent to the Etherpad server.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_collectcontentpre">collectContentPre</h3>
<div class="paragraph">
<p>Called from: src/static/js/contentcollector.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>cc - the contentcollector object</p>
</li>
<li>
<p>state - the current state of the change being made</p>
</li>
<li>
<p>tname - the tag name of this node currently being processed</p>
</li>
<li>
<p>styl - the style applied to the node (probably CSS)&#8201;&#8212;&#8201;Note the typo</p>
</li>
<li>
<p>cls - the HTML class string of the node</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called before the content of a node is collected by the usual
methods. The cc object can be used to do a bunch of things that modify the
content of the pad. See, for example, the heading1 plugin for etherpad original.</p>
</div>
<div class="paragraph">
<p>E.g. if you need to apply an attribute to newly inserted characters, call
cc.doAttrib(state, "attributeName") which results in an attribute
attributeName=true.</p>
</div>
<div class="paragraph">
<p>If you want to specify also a value, call cc.doAttrib(state,
"attributeName::value") which results in an attribute attributeName=value.</p>
</div>
</div>
<div class="sect2">
<h3 id="_collectcontentimage">collectContentImage</h3>
<div class="paragraph">
<p>Called from: src/static/js/contentcollector.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>cc - the contentcollector object</p>
</li>
<li>
<p>state - the current state of the change being made</p>
</li>
<li>
<p>tname - the tag name of this node currently being processed</p>
</li>
<li>
<p>style - the style applied to the node (probably CSS)</p>
</li>
<li>
<p>cls - the HTML class string of the node</p>
</li>
<li>
<p>node - the node being modified</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called before the content of an image node is collected by the
usual methods. The cc object can be used to do a bunch of things that modify the
content of the pad.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.collectContentImage = function(name, context){
  context.state.lineAttributes.img = context.node.outerHTML;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_collectcontentpost">collectContentPost</h3>
<div class="paragraph">
<p>Called from: src/static/js/contentcollector.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>cc - the contentcollector object</p>
</li>
<li>
<p>state - the current state of the change being made</p>
</li>
<li>
<p>tname - the tag name of this node currently being processed</p>
</li>
<li>
<p>style - the style applied to the node (probably CSS)</p>
</li>
<li>
<p>cls - the HTML class string of the node</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called after the content of a node is collected by the usual
methods. The cc object can be used to do a bunch of things that modify the
content of the pad. See, for example, the heading1 plugin for etherpad original.</p>
</div>
</div>
<div class="sect2">
<h3 id="_handleclientmessage_name">handleClientMessage_`name`</h3>
<div class="paragraph">
<p>Called from: <code>src/static/js/collab_client.js</code></p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>payload - the data that got sent with the message (use it for custom message
content)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook gets called every time the client receives a message of type <code>name</code>.
This can most notably be used with the new HTTP API call, "sendClientsMessage",
which sends a custom message type to all clients connected to a pad. You can
also use this to handle existing types.</p>
</div>
<div class="paragraph">
<p><code>collab_client.js</code> has a pretty extensive list of message types, if you want to
take a look.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acestartlineandcharforpoint_aceendlineandcharforpoint">aceStartLineAndCharForPoint-aceEndLineAndCharForPoint</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>callstack - a bunch of information about the current action</p>
</li>
<li>
<p>editorInfo - information about the user who is making the change</p>
</li>
<li>
<p>rep - information about where the change is being made</p>
</li>
<li>
<p>root - the span element of the current line</p>
</li>
<li>
<p>point - the starting/ending element where the cursor highlights</p>
</li>
<li>
<p>documentAttributeManager - information about attributes in the document</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is provided to allow a plugin to turn DOM node selection into</p>
</div>
</div>
<div class="sect2">
<h3 id="_acekeyevent">aceKeyEvent</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>callstack - a bunch of information about the current action</p>
</li>
<li>
<p>editorInfo - information about the user who is making the change</p>
</li>
<li>
<p>rep - information about where the change is being made</p>
</li>
<li>
<p>documentAttributeManager - information about attributes in the document</p>
</li>
<li>
<p>evt - the fired event</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is provided to allow a plugin to handle key events.
The return value should be true if you have handled the event.</p>
</div>
</div>
<div class="sect2">
<h3 id="_collectcontentlinetext">collectContentLineText</h3>
<div class="paragraph">
<p>Called from: src/static/js/contentcollector.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>cc - the contentcollector object</p>
</li>
<li>
<p>state - the current state of the change being made</p>
</li>
<li>
<p>tname - the tag name of this node currently being processed</p>
</li>
<li>
<p>text - the text for that line</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook allows you to validate/manipulate the text before it&#8217;s sent to the
server side. To change the text, either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the <code>text</code> context property to the desired value and return <code>undefined</code>.</p>
</li>
<li>
<p>(Deprecated) Return a string. If a hook function changes the <code>text</code> context
property, the return value is ignored. If no hook function changes <code>text</code> but
multiple hook functions return a string, the first one wins.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.collectContentLineText = (hookName, context) =&gt; {
  context.text = tweakText(context.text);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_collectcontentlinebreak">collectContentLineBreak</h3>
<div class="paragraph">
<p>Called from: src/static/js/contentcollector.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>cc - the contentcollector object</p>
</li>
<li>
<p>state - the current state of the change being made</p>
</li>
<li>
<p>tname - the tag name of this node currently being processed</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is provided to allow whether the br tag should induce a new magic
domline or not. The return value should be either true(break the line) or false.</p>
</div>
</div>
<div class="sect2">
<h3 id="_disableauthorcolorsforthisline">disableAuthorColorsForThisLine</h3>
<div class="paragraph">
<p>Called from: src/static/js/linestylefilter.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>linestylefilter - the JavaScript object that&#8217;s currently processing the ace
attributes</p>
</li>
<li>
<p>text - the line text</p>
</li>
<li>
<p>class - line class</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is provided to allow whether a given line should be deliniated with
multiple authors. Multiple authors in one line cause the creation of magic span
lines. This might not suit you and now you can disable it and handle your own
deliniation. The return value should be either true(disable) or false.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acesetauthorstyle">aceSetAuthorStyle</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>dynamicCSS - css manager for inner ace</p>
</li>
<li>
<p>outerDynamicCSS - css manager for outer ace</p>
</li>
<li>
<p>parentDynamicCSS - css manager for parent document</p>
</li>
<li>
<p>info - author style info</p>
</li>
<li>
<p>author - author info</p>
</li>
<li>
<p>authorSelector - css selector for author span in inner ace</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is provided to allow author highlight style to be modified. Registered
hooks should return 1 if the plugin handles highlighting. If no plugin returns
1, the core will use the default background-based highlighting.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aceselectionchanged">aceSelectionChanged</h3>
<div class="paragraph">
<p>Called from: src/static/js/ace2_inner.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>rep - information about where the user&#8217;s cursor is</p>
</li>
<li>
<p>documentAttributeManager - information about attributes in the document</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook allows a plugin to react to a cursor or selection change,
perhaps to update a UI element based on the style at the cursor location.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_server_side_hooks">Server-side hooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These hooks are called on server-side.</p>
</div>
<div class="sect2">
<h3 id="_loadsettings">loadSettings</h3>
<div class="paragraph">
<p>Called from: src/node/server.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>settings - the settings object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use this hook to receive the global settings in your plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_shutdown">shutdown</h3>
<div class="paragraph">
<p>Called from: src/node/server.js</p>
</div>
<div class="paragraph">
<p>Things in context: None</p>
</div>
<div class="paragraph">
<p>This hook runs before shutdown. Use it to stop timers, close sockets and files,
flush buffers, etc. The database is not available while this hook is running.
The shutdown function must not block for long because there is a short timeout
before the process is forcibly terminated.</p>
</div>
<div class="paragraph">
<p>The shutdown function must return a Promise, which must resolve to <code>undefined</code>.
Returning <code>callback(value)</code> will return a Promise that is resolved to <code>value</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// using an async function
exports.shutdown = async (hookName, context) =&gt; {
  await flushBuffers();
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pluginuninstall">pluginUninstall</h3>
<div class="paragraph">
<p>Called from: src/static/js/pluginfw/installer.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>plugin_name - self-explanatory</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If this hook returns an error, the callback to the uninstall function gets an error as well. This mostly seems useful for handling additional features added in based on the installation of other plugins, which is pretty cool!</p>
</div>
</div>
<div class="sect2">
<h3 id="_plugininstall">pluginInstall</h3>
<div class="paragraph">
<p>Called from: src/static/js/pluginfw/installer.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>plugin_name - self-explanatory</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If this hook returns an error, the callback to the install function gets an error, too. This seems useful for adding in features when a particular plugin is installed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_init_plugin_name">init_&lt;plugin name&gt;</h3>
<div class="paragraph">
<p>Called from: <code>src/static/js/pluginfw/plugins.js</code></p>
</div>
<div class="paragraph">
<p>Run during startup after the named plugin is initialized.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>logger</code>: An object with the following <code>console</code>-like methods: <code>debug</code>,
<code>info</code>, <code>log</code>, <code>warn</code>, <code>error</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_expresspresession">expressPreSession</h3>
<div class="paragraph">
<p>Called from: <code>src/node/hooks/express.js</code></p>
</div>
<div class="paragraph">
<p>Called during server startup just before the
<a href="https://www.npmjs.com/package/express-session"><code>express-session</code></a> middleware is
added to the Express Application object. Use this hook to add route handlers or
middleware that executes before <code>express-session</code> state is created and
authentication is performed. This is useful for creating public endpoints that
don&#8217;t spam the database with new <code>express-session</code> records or trigger
authentication.</p>
</div>
<div class="paragraph">
<p><strong>WARNING:</strong> All handlers registered during this hook run before the built-in
authentication checks, so any handled endpoints will be public unless the
handler itself authenticates the user.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>app</code>: The Express <a href="https://expressjs.com/en/4x/api.html==app">Application</a>
object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.expressPreSession = async (hookName, {app}) =&gt; {
  app.get('/hello-world', (req, res) =&gt; res.send('hello world'));
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expressconfigure">expressConfigure</h3>
<div class="paragraph">
<p>Called from: <code>src/node/hooks/express.js</code></p>
</div>
<div class="paragraph">
<p>Called during server startup just after the
<a href="https://www.npmjs.com/package/express-session"><code>express-session</code></a> middleware is
added to the Express Application object. Use this hook to add route handlers or
middleware that executes after <code>express-session</code> state is created and
authentication is performed.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>app</code>: The Express <a href="https://expressjs.com/en/4x/api.html==app">Application</a>
object.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_expresscreateserver">expressCreateServer</h3>
<div class="paragraph">
<p>Called from: <code>src/node/hooks/express.js</code></p>
</div>
<div class="paragraph">
<p>Identical to the <code>expressConfigure</code> hook (the two run in parallel with each
other) except this hook&#8217;s context includes the HTTP Server object.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>app</code>: The Express <a href="https://expressjs.com/en/4x/api.html==app">Application</a>
object.</p>
</li>
<li>
<p><code>server</code>: The <a href="https://nodejs.org/api/http.html==class-httpserver">http.Server</a>
or <a href="https://nodejs.org/api/https.html==class-httpsserver">https.Server</a> object.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_expresscloseserver">expressCloseServer</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express.js</p>
</div>
<div class="paragraph">
<p>Things in context: Nothing</p>
</div>
<div class="paragraph">
<p>This hook is called when the HTTP server is closing, which happens during
shutdown (see the shutdown hook) and when the server restarts (e.g., when a
plugin is installed via the <code>/admin/plugins</code> page). The HTTP server may or may
not already be closed when this hook executes.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.expressCloseServer = async () =&gt; {
  await doSomeCleanup();
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eejsblock_name">eejsBlock_`&lt;name&gt;`</h3>
<div class="paragraph">
<p>Called from: src/node/eejs/index.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>content - the content of the block</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook gets called upon the rendering of an ejs template block. For any specific kind of block, you can change how that block gets rendered by modifying the content object passed in.</p>
</div>
<div class="paragraph">
<p>Available blocks in <code>pad.html</code> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>htmlHead</code> - after <code>&lt;html&gt;</code> and immediately before the title tag</p>
</li>
<li>
<p><code>styles</code> - the style `&lt;link&gt;`s</p>
</li>
<li>
<p><code>body</code> - the contents of the body tag</p>
</li>
<li>
<p><code>editbarMenuLeft</code> - the left tool bar (consider using the toolbar controller instead of manually adding html here)</p>
</li>
<li>
<p><code>editbarMenuRight</code> - right tool bar</p>
</li>
<li>
<p><code>afterEditbar</code> - allows you to add stuff immediately after the toolbar</p>
</li>
<li>
<p><code>userlist</code> - the contents of the userlist dropdown</p>
</li>
<li>
<p><code>loading</code> - the initial loading message</p>
</li>
<li>
<p><code>mySettings</code> - the left column of the settings dropdown ("My view"); intended for adding checkboxes only</p>
</li>
<li>
<p><code>mySettings.dropdowns</code> - add your dropdown settings here</p>
</li>
<li>
<p><code>globalSettings</code> - the right column of the settings dropdown ("Global view")</p>
</li>
<li>
<p><code>importColumn</code> - import form</p>
</li>
<li>
<p><code>exportColumn</code> - export form</p>
</li>
<li>
<p><code>modals</code> - Contains all connectivity messages</p>
</li>
<li>
<p><code>embedPopup</code> - the embed dropdown</p>
</li>
<li>
<p><code>scripts</code> - Add your script tags here, if you really have to (consider use client-side hooks instead)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>timeslider.html</code> blocks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>timesliderStyles</code></p>
</li>
<li>
<p><code>timesliderScripts</code></p>
</li>
<li>
<p><code>timesliderBody</code></p>
</li>
<li>
<p><code>timesliderTop</code></p>
</li>
<li>
<p><code>timesliderEditbarRight</code></p>
</li>
<li>
<p><code>modals</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>index.html</code> blocks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>indexCustomStyles</code> - contains the <code>index.css</code> <code>&lt;link&gt;</code> tag, allows you to add your own or to customize the one provided by the active skin</p>
</li>
<li>
<p><code>indexWrapper</code> - contains the form for creating new pads</p>
</li>
<li>
<p><code>indexCustomScripts</code> - contains the <code>index.js</code> <code>&lt;script&gt;</code> tag, allows you to add your own or to customize the one provided by the active skin</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_padinittoolbar">padInitToolbar</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/specialpages.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>toolbar - the toolbar controller that will render the toolbar eventually</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here you can add custom toolbar items that will be available in the toolbar config in <code>settings.json</code>. For more about the toolbar controller see the API section.</p>
</div>
<div class="paragraph">
<p>Usage examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/tiblu/ep_authorship_toggle" class="bare">https://github.com/tiblu/ep_authorship_toggle</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_onaccesscheck">onAccessCheck</h3>
<div class="paragraph">
<p>Called from: src/node/db/SecurityManager.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>padID - the real ID (never the read-only ID) of the pad the user wants to
access</p>
</li>
<li>
<p>token - the token of the author</p>
</li>
<li>
<p>sessionCookie - the session the use has</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook gets called when the access to the concrete pad is being checked.
Return <code>false</code> to deny access.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getauthorid">getAuthorId</h3>
<div class="paragraph">
<p>Called from <code>src/node/db/AuthorManager.js</code></p>
</div>
<div class="paragraph">
<p>Called when looking up (or creating) the author ID for a user, except for author
IDs obtained via the HTTP API. Registered hook functions are called until one
returns a non-<code>undefined</code> value. If a truthy value is returned by a hook
function, it is used as the user&#8217;s author ID. Otherwise, the value of the
<code>dbKey</code> context property is used to look up the author ID. If there is no such
author ID at that key, a new author ID is generated and associated with that
key.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dbKey</code>: Database key to use when looking up the user&#8217;s author ID if no hook
function returns an author ID. This is initialized to the user-supplied token
value (see the <code>token</code> context property), but hook functions can modify this
to control how author IDs are allocated to users. If no author ID is
associated with this database key, a new author ID will be randomly generated
and associated with the key. For security reasons, if this is modified it
should be modified to not look like a valid token (see the <code>token</code> context
property) unless the plugin intentionally wants the user to be able to
impersonate another user.</p>
</li>
<li>
<p><code>token</code>: The user-supplied token, or nullish for an anonymous user. Tokens are
secret values that must not be disclosed to others. If non-null, the token is
guaranteed to be a string with the form <code>t.&lt;base64url&gt;</code> where <code>&lt;base64url&gt;</code> is
any valid non-empty base64url string (RFC 4648 section 5 with padding).
Example: <code>t.twim3X2_KGiRj8cJ-3602g==</code>.</p>
</li>
<li>
<p><code>user</code>: If the user has authenticated, this is an object from <code>settings.users</code>
(or similar from an authentication plugin). Etherpad core and all good
authentication plugins set the <code>username</code> property of this object to a string
that uniquely identifies the authenticated user. This object is nullish if the
user has not authenticated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.getAuthorId = async (hookName, context) =&gt; {
  const {username} = context.user || {};
  // If the user has not authenticated, or has "authenticated" as the guest
  // user, do the default behavior (try another plugin if any, falling through
  // to using the token as the database key).
  if (!username || username === 'guest') return;
  // The user is authenticated and has a username. Give the user a stable author
  // ID so that they appear to be the same author even after clearing cookies or
  // accessing the pad from another device. Note that this string is guaranteed
  // to never have the form of a valid token; without that guarantee an
  // unauthenticated user might be able to impersonate an authenticated user.
  context.dbKey = `username=${username}`;
  // Return a falsy but non-undefined value to stop Etherpad from calling any
  // more getAuthorId hook functions and look up the author ID using the
  // username-derived database key.
  return '';
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_padcreate">padCreate</h3>
<div class="paragraph">
<p>Called from: <code>src/node/db/Pad.js</code></p>
</div>
<div class="paragraph">
<p>Called when a new pad is created.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: The Pad object.</p>
</li>
<li>
<p><code>authorId</code>: The ID of the author who created the pad.</p>
</li>
<li>
<p><code>author</code> (<strong>deprecated</strong>): Synonym of <code>authorId</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_paddefaultcontent">padDefaultContent</h3>
<div class="paragraph">
<p>Called from <code>src/node/db/Pad.js</code></p>
</div>
<div class="paragraph">
<p>Called to obtain a pad&#8217;s initial content, unless the pad is being created with
specific content. The return value is ignored; to change the content, modify the
<code>content</code> context property.</p>
</div>
<div class="paragraph">
<p>This hook is run asynchronously. All registered hook functions are run
concurrently (via <code>Promise.all()</code>), so be careful to avoid race conditions when
reading and modifying the context properties.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: The newly created Pad object.</p>
</li>
<li>
<p><code>authorId</code>: The author ID of the user that is creating the pad.</p>
</li>
<li>
<p><code>type</code>: String identifying the content type. Currently this is <code>'text'</code> and
must not be changed. Future versions of Etherpad may add support for HTML,
jsdom objects, or other formats, so plugins must assert that this matches a
supported content type before reading <code>content</code>.</p>
</li>
<li>
<p><code>content</code>: The pad&#8217;s initial content. Change this property to change the pad&#8217;s
initial content. If the content type is changed, the <code>type</code> property must also
be updated to match. Plugins must check the value of the <code>type</code> property
before reading this value.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_padload">padLoad</h3>
<div class="paragraph">
<p>Called from: <code>src/node/db/PadManager.js</code></p>
</div>
<div class="paragraph">
<p>Called when a pad is loaded, including after new pad creation.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: The Pad object.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_padupdate">padUpdate</h3>
<div class="paragraph">
<p>Called from: <code>src/node/db/Pad.js</code></p>
</div>
<div class="paragraph">
<p>Called when an existing pad is updated.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: The Pad object.</p>
</li>
<li>
<p><code>authorId</code>: The ID of the author who updated the pad.</p>
</li>
<li>
<p><code>author</code> (<strong>deprecated</strong>): Synonym of <code>authorId</code>.</p>
</li>
<li>
<p><code>revs</code>: The index of the new revision.</p>
</li>
<li>
<p><code>changeset</code>: The changeset of this revision (see <a href="#_padupdate">padUpdate</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_padcopy">padCopy</h3>
<div class="paragraph">
<p>Called from: <code>src/node/db/Pad.js</code></p>
</div>
<div class="paragraph">
<p>Called when a pad is copied so that plugins can copy plugin-specific database
records or perform some other plugin-specific initialization.</p>
</div>
<div class="paragraph">
<p>Order of events when a pad is copied:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Destination pad is deleted if it exists and overwrite is permitted. This
causes the <code>padRemove</code> hook to run.</p>
</li>
<li>
<p>Pad-specific database records are copied in the database, except for
records with plugin-specific database keys.</p>
</li>
<li>
<p>A new Pad object is created for the destination pad. This causes the
<code>padLoad</code> hook to run.</p>
</li>
<li>
<p>This hook runs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcPad</code>: The source Pad object.</p>
</li>
<li>
<p><code>dstPad</code>: The destination Pad object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Usage examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ether/ep_comments_page" class="bare">https://github.com/ether/ep_comments_page</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_padremove">padRemove</h3>
<div class="paragraph">
<p>Called from: <code>src/node/db/Pad.js</code></p>
</div>
<div class="paragraph">
<p>Called when an existing pad is removed/deleted. Plugins should use this to clean
up any plugin-specific pad records from the database.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: Pad object for the pad that is being deleted.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Usage examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ether/ep_comments_page" class="bare">https://github.com/ether/ep_comments_page</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_padcheck">padCheck</h3>
<div class="paragraph">
<p>Called from: <code>src/node/db/Pad.js</code></p>
</div>
<div class="paragraph">
<p>Called when a consistency check is run on a pad, after the core checks have
completed successfully. An exception should be thrown if the pad is faulty in
some way.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: The Pad object that is being checked.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_socketio">socketio</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/socketio.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>app - the application object</p>
</li>
<li>
<p>io - the socketio object</p>
</li>
<li>
<p>server - the http server object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>I have no idea what this is useful for, someone else will have to add this description.</p>
</div>
</div>
<div class="sect2">
<h3 id="_preauthorize">preAuthorize</h3>
<div class="paragraph">
<p>Called from: <code>src/node/hooks/express/webaccess.js</code></p>
</div>
<div class="paragraph">
<p>Called for each HTTP request before any authentication checks are performed. The
registered <code>preAuthorize</code> hook functions are called one at a time until one
explicitly grants or denies the request by returning <code>true</code> or <code>false</code>,
respectively. If none of the hook functions return anything, the access decision
is deferred to the normal authentication and authorization checks.</p>
</div>
<div class="paragraph">
<p>Example uses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Always grant access to static content.</p>
</li>
<li>
<p>Process an OAuth callback.</p>
</li>
<li>
<p>Drop requests from IP addresses that have failed N authentication checks
within the past X minutes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Return values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>undefined</code> (or <code>[]</code>) defers the access decision to the next registered
<code>preAuthorize</code> hook function, or to the normal authentication and
authorization checks if no more <code>preAuthorize</code> hook functions remain.</p>
</li>
<li>
<p><code>true</code> (or <code>[true]</code>) immediately grants access to the requested resource,
unless the request is for an <code>/admin</code> page in which case it is treated the
same as returning <code>undefined</code>. (This prevents buggy plugins from accidentally
granting admin access to the general public.)</p>
</li>
<li>
<p><code>false</code> (or <code>[false]</code>) immediately denies the request. The <code>preAuthnFailure</code>
hook will be called to handle the failure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>req</code>: The Express <a href="https://expressjs.com/en/4x/api.html==req">Request</a> object.</p>
</li>
<li>
<p><code>res</code>: The Express <a href="https://expressjs.com/en/4x/api.html==res">Response</a>
object.</p>
</li>
<li>
<p><code>next</code>: Callback to immediately hand off handling to the next Express
middleware/handler, or to the next matching route if <code>'route'</code> is passed as
the first argument. Do not call this unless you understand the consequences.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.preAuthorize = async (hookName, {req}) =&gt; {
  if (await ipAddressIsFirewalled(req)) return false;
  if (requestIsForStaticContent(req)) return true;
  if (requestIsForOAuthCallback(req)) return true;
  // Defer the decision to the next step by returning undefined.
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authorize">authorize</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/webaccess.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>req - the request object</p>
</li>
<li>
<p>res - the response object</p>
</li>
<li>
<p>next - ?</p>
</li>
<li>
<p>resource - the path being accessed</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called to handle authorization. It is especially useful for
controlling access to specific paths.</p>
</div>
<div class="paragraph">
<p>A plugin&#8217;s authorize function is only called if all of the following are true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The request is not for static content or an API endpoint. (Requests for static
content and API endpoints are always authorized, even if unauthenticated.)</p>
</li>
<li>
<p>The <code>requireAuthentication</code> and <code>requireAuthorization</code> settings are both true.</p>
</li>
<li>
<p>The user has already successfully authenticated.</p>
</li>
<li>
<p>The user is not an admin (admin users are always authorized).</p>
</li>
<li>
<p>The path being accessed is not an <code>/admin</code> path (<code>/admin</code> paths can only be
accessed by admin users, and admin users are always authorized).</p>
</li>
<li>
<p>An authorize function from a different plugin has not already caused
authorization to pass or fail.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the authorize hook cannot grant access to <code>/admin</code> pages. If admin
access is desired, the <code>is_admin</code> user setting must be set to true. This can be
set in the settings file or by the authenticate hook.</p>
</div>
<div class="paragraph">
<p>You can pass the following values to the provided callback:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>[true]</code> or <code>['create']</code> will grant access to modify or create the pad if the
request is for a pad, otherwise access is simply granted. Access to a pad will
be downgraded to modify-only if <code>settings.editOnly</code> is true or the user&#8217;s
<code>canCreate</code> setting is set to <code>false</code>, and downgraded to read-only if the
user&#8217;s <code>readOnly</code> setting is <code>true</code>.</p>
</li>
<li>
<p><code>['modify']</code> will grant access to modify but not create the pad if the request
is for a pad, otherwise access is simply granted. Access to a pad will be
downgraded to read-only if the user&#8217;s <code>readOnly</code> setting is <code>true</code>.</p>
</li>
<li>
<p><code>['readOnly']</code> will grant read-only access.</p>
</li>
<li>
<p><code>[false]</code> will deny access.</p>
</li>
<li>
<p><code>[]</code> or <code>undefined</code> will defer the authorization decision to the next
authorization plugin (if any, otherwise deny).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.authorize = (hookName, context, cb) =&gt; {
  const user = context.req.session.user;
  const path = context.req.path;  // or context.resource
  if (isExplicitlyProhibited(user, path)) return cb([false]);
  if (isExplicitlyAllowed(user, path)) return cb([true]);
  return cb([]);  // Let the next authorization plugin decide
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authenticate">authenticate</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/webaccess.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>req - the request object</p>
</li>
<li>
<p>res - the response object</p>
</li>
<li>
<p>users - the users object from settings.json (possibly modified by plugins)</p>
</li>
<li>
<p>next - ?</p>
</li>
<li>
<p>username - the username used (optional)</p>
</li>
<li>
<p>password - the password used (optional)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called to handle authentication.</p>
</div>
<div class="paragraph">
<p>Plugins that supply an authenticate function should probably also supply an
authnFailure function unless falling back to HTTP basic authentication is
appropriate upon authentication failure.</p>
</div>
<div class="paragraph">
<p>This hook is only called if either the <code>requireAuthentication</code> setting is true
or the request is for an <code>/admin</code> page.</p>
</div>
<div class="paragraph">
<p>Calling the provided callback with <code>[true]</code> or <code>[false]</code> will cause
authentication to succeed or fail, respectively. Calling the callback with <code>[]</code>
or <code>undefined</code> will defer the authentication decision to the next authentication
plugin (if any, otherwise fall back to HTTP basic authentication).</p>
</div>
<div class="paragraph">
<p>If you wish to provide a mix of restricted and anonymous access (e.g., some pads
are private, others are public), you can "authenticate" (as a guest account)
users that have not yet logged in, and rely on other hooks (e.g., authorize,
onAccessCheck, handleMessageSecurity) to authorize specific privileged actions.</p>
</div>
<div class="paragraph">
<p>If authentication is successful, the authenticate function MUST set
<code>context.req.session.user</code> to the user&#8217;s settings object. The <code>username</code>
property of this object should be set to the user&#8217;s username. The settings
object should come from global settings (<code>context.users[username]</code>).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.authenticate = (hook_name, context, cb) =&gt; {
  if (notApplicableToThisPlugin(context)) {
    return cb([]);  // Let the next authentication plugin decide
  }
  const username = authenticate(context);
  if (!username) {
    console.warn(`ep_myplugin.authenticate: Failed authentication from IP ${context.req.ip}`);
    return cb([false]);
  }
  console.info(`ep_myplugin.authenticate: Successful authentication from IP ${context.req.ip} for user ${username}`);
  const users = context.users;
  if (!(username in users)) users[username] = {};
  users[username].username = username;
  context.req.session.user = users[username];
  return cb([true]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authfailure">authFailure</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/webaccess.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>req - the request object</p>
</li>
<li>
<p>res - the response object</p>
</li>
<li>
<p>next - ?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>DEPRECATED:</strong> Use authnFailure or authzFailure instead.</p>
</div>
<div class="paragraph">
<p>This hook is called to handle an authentication or authorization failure.</p>
</div>
<div class="paragraph">
<p>Plugins that supply an authenticate function should probably also supply an
authnFailure function unless falling back to HTTP basic authentication is
appropriate upon authentication failure.</p>
</div>
<div class="paragraph">
<p>A plugin&#8217;s authFailure function is only called if all of the following are true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There was an authentication or authorization failure.</p>
</li>
<li>
<p>The failure was not already handled by an authFailure function from another
plugin.</p>
</li>
<li>
<p>For authentication failures: The failure was not already handled by the
authnFailure hook.</p>
</li>
<li>
<p>For authorization failures: The failure was not already handled by the
authzFailure hook.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Calling the provided callback with <code>[true]</code> tells Etherpad that the failure was
handled and no further error handling is required. Calling the callback with
<code>[]</code> or <code>undefined</code> defers error handling to the next authFailure plugin (if
any, otherwise fall back to HTTP basic authentication for an authentication
failure or a generic 403 page for an authorization failure).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.authFailure = (hookName, context, cb) =&gt; {
  if (notApplicableToThisPlugin(context)) {
    return cb([]);  // Let the next plugin handle the error
  }
  context.res.redirect(makeLoginURL(context.req));
  return cb([true]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_preauthzfailure">preAuthzFailure</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/webaccess.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>req - the request object</p>
</li>
<li>
<p>res - the response object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called to handle a pre-authentication authorization failure.</p>
</div>
<div class="paragraph">
<p>A plugin&#8217;s preAuthzFailure function is only called if the pre-authentication
authorization failure was not already handled by a preAuthzFailure function from
another plugin.</p>
</div>
<div class="paragraph">
<p>Calling the provided callback with <code>[true]</code> tells Etherpad that the failure was
handled and no further error handling is required. Calling the callback with
<code>[]</code> or <code>undefined</code> defers error handling to a preAuthzFailure function from
another plugin (if any, otherwise fall back to a generic 403 error page).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.preAuthzFailure = (hookName, context, cb) =&gt; {
  if (notApplicableToThisPlugin(context)) return cb([]);
  context.res.status(403).send(renderFancy403Page(context.req));
  return cb([true]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authnfailure">authnFailure</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/webaccess.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>req - the request object</p>
</li>
<li>
<p>res - the response object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called to handle an authentication failure.</p>
</div>
<div class="paragraph">
<p>Plugins that supply an authenticate function should probably also supply an
authnFailure function unless falling back to HTTP basic authentication is
appropriate upon authentication failure.</p>
</div>
<div class="paragraph">
<p>A plugin&#8217;s authnFailure function is only called if the authentication failure
was not already handled by an authnFailure function from another plugin.</p>
</div>
<div class="paragraph">
<p>Calling the provided callback with <code>[true]</code> tells Etherpad that the failure was
handled and no further error handling is required. Calling the callback with
<code>[]</code> or <code>undefined</code> defers error handling to an authnFailure function from
another plugin (if any, otherwise fall back to the deprecated authFailure hook).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.authnFailure = (hookName, context, cb) =&gt; {
  if (notApplicableToThisPlugin(context)) return cb([]);
  context.res.redirect(makeLoginURL(context.req));
  return cb([true]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authzfailure">authzFailure</h3>
<div class="paragraph">
<p>Called from: src/node/hooks/express/webaccess.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>req - the request object</p>
</li>
<li>
<p>res - the response object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called to handle a post-authentication authorization failure.</p>
</div>
<div class="paragraph">
<p>A plugin&#8217;s authzFailure function is only called if the authorization failure was
not already handled by an authzFailure function from another plugin.</p>
</div>
<div class="paragraph">
<p>Calling the provided callback with <code>[true]</code> tells Etherpad that the failure was
handled and no further error handling is required. Calling the callback with
<code>[]</code> or <code>undefined</code> defers error handling to an authzFailure function from
another plugin (if any, otherwise fall back to the deprecated authFailure hook).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.authzFailure = (hookName, context, cb) =&gt; {
  if (notApplicableToThisPlugin(context)) return cb([]);
  if (needsPremiumAccount(context.req) &amp;&amp; !context.req.session.user.premium) {
    context.res.status(200).send(makeUpgradeToPremiumAccountPage(context.req));
    return cb([true]);
  }
  // Use the generic 403 forbidden response.
  return cb([]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handlemessage">handleMessage</h3>
<div class="paragraph">
<p>Called from: <code>src/node/handler/PadMessageHandler.js</code></p>
</div>
<div class="paragraph">
<p>This hook allows plugins to drop or modify incoming socket.io messages from
clients, before Etherpad processes them. If any hook function returns <code>null</code>
then the message will not be subject to further processing.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>message</code>: The message being handled.</p>
</li>
<li>
<p><code>sessionInfo</code>: Object describing the socket.io session with the following
properties:</p>
</li>
<li>
<p><code>authorId</code>: The user&#8217;s author ID.</p>
</li>
<li>
<p><code>padId</code>: The real (not read-only) ID of the pad.</p>
</li>
<li>
<p><code>readOnly</code>: Whether the client has read-only access (true) or read/write
access (false).</p>
</li>
<li>
<p><code>socket</code>: The socket.io Socket object.</p>
</li>
<li>
<p><code>client</code>: (<strong>Deprecated</strong>; use <code>socket</code> instead.) Synonym of <code>socket</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.handleMessage = async (hookName, {message, socket}) =&gt; {
  if (message.type === 'USERINFO_UPDATE') {
    // Force the display name to the name associated with the account.
    const user = socket.client.request.session.user || {};
    if (user.name) message.data.userInfo.name = user.name;
  }
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handlemessagesecurity">handleMessageSecurity</h3>
<div class="paragraph">
<p>Called from: <code>src/node/handler/PadMessageHandler.js</code></p>
</div>
<div class="paragraph">
<p>Called for each incoming message from a client. Allows plugins to grant
temporary write access to a pad.</p>
</div>
<div class="paragraph">
<p>Supported return values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>undefined</code>: No change in access status.</p>
</li>
<li>
<p><code>'permitOnce'</code>: Override the user&#8217;s read-only access for the current
<code>COLLABROOM</code> message only. Has no effect if the current message is not a
<code>COLLABROOM</code> message, or if the user already has write access to the pad.</p>
</li>
<li>
<p><code>true</code>: (<strong>Deprecated</strong>; return <code>'permitOnce'</code> instead.) Override the user&#8217;s
read-only access for all <code>COLLABROOM</code> messages from the same socket.io
connection (including the current message, if applicable) until the client&#8217;s
next <code>CLIENT_READY</code> message. Has no effect if the user already has write
access to the pad. Read-only access is reset <strong>after</strong> each <code>CLIENT_READY</code>
message, so returning <code>true</code> has no effect for <code>CLIENT_READY</code> messages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>message</code>: The message being handled.</p>
</li>
<li>
<p><code>sessionInfo</code>: Object describing the socket.io connection with the following
properties:</p>
</li>
<li>
<p><code>authorId</code>: The user&#8217;s author ID.</p>
</li>
<li>
<p><code>padId</code>: The real (not read-only) ID of the pad.</p>
</li>
<li>
<p><code>readOnly</code>: Whether the client has read-only access (true) or read/write
access (false).</p>
</li>
<li>
<p><code>socket</code>: The socket.io Socket object.</p>
</li>
<li>
<p><code>client</code>: (<strong>Deprecated</strong>; use <code>socket</code> instead.) Synonym of <code>socket</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.handleMessageSecurity = async (hookName, context) =&gt; {
  const {message, sessionInfo: {readOnly}} = context;
  if (!readOnly || message.type !== 'COLLABROOM') return;
  if (await messageIsBenign(message)) return 'permitOnce';
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clientvars">clientVars</h3>
<div class="paragraph">
<p>Called from: src/node/handler/PadMessageHandler.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>clientVars - the basic <code>clientVars</code> built by the core</p>
</li>
<li>
<p>pad - the pad this session is about</p>
</li>
<li>
<p>socket - the socket.io Socket object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook is called after a client connects but before the initial configuration
is sent to the client. Plugins can use this hook to manipulate the
configuration. (Example: Add a tracking ID for an external analytics tool that
is used client-side.)</p>
</div>
<div class="paragraph">
<p>You can manipulate <code>clientVars</code> in two different ways:
* Return an object. The object will be merged into <code>clientVars</code> via
  <code>Object.assign()</code>, so any keys that already exist in <code>clientVars</code> will be
  overwritten by the values in the returned object.
* Modify <code>context.clientVars</code>. Beware: Other plugins might also be reading or
  manipulating the same <code>context.clientVars</code> object. To avoid race conditions,
  you are encouraged to return an object rather than modify
  <code>context.clientVars</code>.</p>
</div>
<div class="paragraph">
<p>If needed, you can access the user&#8217;s account information (if authenticated) via
<code>context.socket.client.request.session.user</code>.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Using an async function
exports.clientVars = async (hookName, context) =&gt; {
  const user = context.socket.client.request.session.user || {};
  return {'accountUsername': user.username || '&lt;unknown&gt;'}
};

// Using a regular function
exports.clientVars = (hookName, context, callback) =&gt; {
  const user = context.socket.client.request.session.user || {};
  return callback({'accountUsername': user.username || '&lt;unknown&gt;'});
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getlinehtmlforexport">getLineHTMLForExport</h3>
<div class="paragraph">
<p>Called from: <code>src/node/utils/ExportHtml.js</code></p>
</div>
<div class="paragraph">
<p>This hook will allow a plug-in developer to re-write each line when exporting to
HTML.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>apool</code>: Pool object.</p>
</li>
<li>
<p><code>attribLine</code>: Line attributes.</p>
</li>
<li>
<p><code>line</code>:</p>
</li>
<li>
<p><code>lineContent</code>:</p>
</li>
<li>
<p><code>text</code>: Line text.</p>
</li>
<li>
<p><code>padId</code>: Writable (not read-only) pad identifier.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const AttributeMap = require('ep_etherpad-lite/static/js/AttributeMap');
const Changeset = require('ep_etherpad-lite/static/js/Changeset');

exports.getLineHTMLForExport = async (hookName, context) =&gt; {
  if (!context.attribLine) return;
  const [op] = Changeset.deserializeOps(context.attribLine);
  if (op == null) return;
  const heading = AttributeMap.fromString(op.attribs, context.apool).get('heading');
  if (!heading) return;
  context.lineContent = `&lt;${heading}&gt;${context.lineContent}&lt;/${heading}&gt;`;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exporthtmladditionalcontent">exportHTMLAdditionalContent</h3>
<div class="paragraph">
<p>Called from: src/node/utils/ExportHtml.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>padId</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook will allow a plug-in developer to include additional HTML content in
the body of the exported HTML.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.exportHTMLAdditionalContent = async (hookName, {padId}) =&gt; {
  return 'I am groot in ' + padId;
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stylesforexport">stylesForExport</h3>
<div class="paragraph">
<p>Called from: src/node/utils/ExportHtml.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>padId - The Pad Id</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook will allow a plug-in developer to append Styles to the Exported HTML.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.stylesForExport = function(hook, padId, cb){
  cb("body{font-size:13.37em !important}");
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aceattribclasses_2">aceAttribClasses</h3>
<div class="paragraph">
<p>Called from: src/static/js/linestylefilter.js</p>
</div>
<div class="paragraph">
<p>This hook is called when attributes are investigated on a line. It is useful if
you want to add another attribute type or property type to a pad.</p>
</div>
<div class="paragraph">
<p>An attributes object is passed to the aceAttribClasses hook functions instead of
the usual context object. A hook function can either modify this object directly
or provide an object whose properties will be assigned to the attributes object.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.aceAttribClasses = (hookName, attrs, cb) =&gt; {
  return cb([{
    sub: 'tag:sub',
  }]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exportfilename">exportFileName</h3>
<div class="paragraph">
<p>Called from src/node/handler/ExportHandler.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>padId</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook will allow a plug-in developer to modify the file name of an exported pad.  This is useful if you want to export a pad under another name and/or hide the padId under export.  Note that the doctype or file extension cannot be modified for security reasons.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.exportFileName = function(hook, padId, callback){
  callback("newFileName"+padId);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exporthtmladditionaltags">exportHtmlAdditionalTags</h3>
<div class="paragraph">
<p>Called from src/node/utils/ExportHtml.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pad object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hook will allow a plug-in developer to include more properties and attributes to support during HTML Export. If tags are stored as <code>['color', 'red']</code> on the attribute pool, use <code>exportHtmlAdditionalTagsWithData</code> instead. An Array should be returned.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Add the props to be supported in export
exports.exportHtmlAdditionalTags = function(hook, pad, cb){
  var padId = pad.id;
  cb(["massive","jugs"]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exporthtmladditionaltagswithdata">exportHtmlAdditionalTagsWithData</h3>
<div class="paragraph">
<p>Called from src/node/utils/ExportHtml.js</p>
</div>
<div class="paragraph">
<p>Things in context:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pad object</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Identical to <code>exportHtmlAdditionalTags</code>, but for tags that are stored with a specific value (not simply <code>true</code>) on the attribute pool. For example <code>['color', 'red']</code>, instead of <code>['bold', true]</code>. This hook will allow a plug-in developer to include more properties and attributes to support during HTML Export. An Array of arrays should be returned. The exported HTML will contain tags like <code>&lt;span data-color="red"&gt;</code> for the content where attributes are <code>['color', 'red']</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Add the props to be supported in export
exports.exportHtmlAdditionalTagsWithData = function(hook, pad, cb){
  var padId = pad.id;
  cb([["color", "red"], ["color", "blue"]]);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exportetherpadadditionalcontent">exportEtherpadAdditionalContent</h3>
<div class="paragraph">
<p>Called from <code>src/node/utils/ExportEtherpad.js</code> and
<code>src/node/utils/ImportEtherpad.js</code>.</p>
</div>
<div class="paragraph">
<p>Called when exporting to an <code>.etherpad</code> file or when importing from an
<code>.etherpad</code> file. The hook function should return prefixes for pad-specific
records that should be included in the export/import. On export, all
<code>${prefix}:${padId}</code> and <code>${prefix}:${padId}:*</code> records are included in the
generated <code>.etherpad</code> file. On import, all <code>${prefix}:${padId}</code> and
<code>${prefix}:${padId}:*</code> records are loaded into the database.</p>
</div>
<div class="paragraph">
<p>Context properties: None.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Add support for exporting comments metadata
exports.exportEtherpadAdditionalContent = () =&gt; ['comments'];</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exportetherpad">exportEtherpad</h3>
<div class="paragraph">
<p>Called from <code>src/node/utils/ExportEtherpad.js</code>.</p>
</div>
<div class="paragraph">
<p>Called when exporting to an <code>.etherpad</code> file.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: The exported pad&#8217;s Pad object.</p>
</li>
<li>
<p><code>data</code>: JSONable output object. This is pre-populated with records from core
Etherpad as well as pad-specific records with prefixes from the
<code>exportEtherpadAdditionalContent</code> hook. Registered hook functions can modify
this object (but not replace the object) to perform any desired
transformations to the exported data (such as the inclusion of
plugin-specific records). All registered hook functions are executed
concurrently, so care should be taken to avoid race conditions with other
plugins.</p>
</li>
<li>
<p><code>dstPadId</code>: The pad ID that should be used when writing pad-specific records
to <code>data</code> (instead of <code>pad.id</code>). This avoids leaking the writable pad ID
when a user exports a read-only pad. This might be a dummy value; plugins
should not assume that it is either the pad&#8217;s real writable ID or its
read-only ID.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_importetherpad">importEtherpad</h3>
<div class="paragraph">
<p>Called from <code>src/node/utils/ImportEtherpad.js</code>.</p>
</div>
<div class="paragraph">
<p>Called when importing from an <code>.etherpad</code> file.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pad</code>: Temporary Pad object containing the pad&#8217;s data read from the imported
<code>.etherpad</code> file. The <code>pad.db</code> object is a temporary in-memory database
whose records will be copied to the real database after they are validated
(see the <code>padCheck</code> hook). Registered hook functions MUST NOT use the real
database to access (read or write) pad-specific records; they MUST instead
use <code>pad.db</code>. All registered hook functions are executed concurrently, so
care should be taken to avoid race conditions with other plugins.</p>
</li>
<li>
<p><code>data</code>: Raw JSONable object from the <code>.etherpad</code> file. This data must not be
modified.</p>
</li>
<li>
<p><code>srcPadId</code>: The pad ID used for the pad-specific information in <code>data</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_import">import</h3>
<div class="paragraph">
<p>Called from: <code>src/node/handler/ImportHandler.js</code></p>
</div>
<div class="paragraph">
<p>Called when a user submits a document for import, before the document is
converted to HTML. The hook function should return a truthy value if the hook
function elected to convert the document to HTML.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>destFile</code>: The destination HTML filename.</p>
</li>
<li>
<p><code>fileEnding</code>: The lower-cased filename extension from <code>srcFile</code> <strong>with leading
period</strong> (examples: <code>'.docx'</code>, <code>'.html'</code>, <code>'.etherpad'</code>).</p>
</li>
<li>
<p><code>padId</code>: The identifier of the destination pad.</p>
</li>
<li>
<p><code>srcFile</code>: The document to convert.</p>
</li>
<li>
<p><code>ImportError</code>: Subclass of Error that can be thrown to provide a specific
error message to the user. The constructor&#8217;s first argument must be a string
matching one of the [known error
identifiers](<a href="https://github.com/ether/etherpad-lite/blob/1.8.16/src/static/js/pad_impexp.js==L80-L86" class="bare">https://github.com/ether/etherpad-lite/blob/1.8.16/src/static/js/pad_impexp.js==L80-L86</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.import = async (hookName, {fileEnding, ImportError}) =&gt; {
  // Reject all *.etherpad imports with a permission denied message.
  if (fileEnding === '.etherpad') throw new ImportError('permission');
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_userjoin">userJoin</h3>
<div class="paragraph">
<p>Called from: <code>src/node/handler/PadMessageHandler.js</code></p>
</div>
<div class="paragraph">
<p>Called after users have been notified that a new user has joined the pad.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>authorId</code>: The user&#8217;s author identifier.</p>
</li>
<li>
<p><code>displayName</code>: The user&#8217;s display name.</p>
</li>
<li>
<p><code>padId</code>: The real (not read-only) identifier of the pad the user joined. This
MUST NOT be shared with any users that are connected with read-only access.</p>
</li>
<li>
<p><code>readOnly</code>: Whether the user only has read-only access.</p>
</li>
<li>
<p><code>readOnlyPadId</code>: The read-only identifier of the pad the user joined.</p>
</li>
<li>
<p><code>socket</code>: The socket.io Socket object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.userJoin = async (hookName, {authorId, displayName, padId}) =&gt; {
  console.log(`${authorId} (${displayName}) joined pad ${padId});
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_userleave">userLeave</h3>
<div class="paragraph">
<p>Called from: <code>src/node/handler/PadMessageHandler.js</code></p>
</div>
<div class="paragraph">
<p>Called when a user disconnects from a pad. This is useful if you want to perform
certain actions after a pad has been edited.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>authorId</code>: The user&#8217;s author ID.</p>
</li>
<li>
<p><code>padId</code>: The pad&#8217;s real (not read-only) identifier.</p>
</li>
<li>
<p><code>readOnly</code>: If truthy, the user only has read-only access.</p>
</li>
<li>
<p><code>readOnlyPadId</code>: The pad&#8217;s read-only identifier.</p>
</li>
<li>
<p><code>socket</code>: The socket.io Socket object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">exports.userLeave = async (hookName, {author, padId}) =&gt; {
  console.log(`${author} left pad ${padId}`);
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_chatnewmessage_2">chatNewMessage</h3>
<div class="paragraph">
<p>Called from: <code>src/node/handler/PadMessageHandler.js</code></p>
</div>
<div class="paragraph">
<p>Called when a user (or plugin) generates a new chat message, just before it is
saved to the pad and relayed to all connected users.</p>
</div>
<div class="paragraph">
<p>Context properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>message</code>: The chat message object. Plugins can mutate this object to change
the message text or add custom metadata to control how the message will be
rendered by the <code>chatNewMessage</code> client-side hook. The message&#8217;s <code>authorId</code>
property can be trusted (the server overwrites any client-provided author ID
value with the user&#8217;s actual author ID before this hook runs).</p>
</li>
<li>
<p><code>padId</code>: The pad&#8217;s real (not read-only) identifier.</p>
</li>
<li>
<p><code>pad</code>: The pad&#8217;s Pad object.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_editorinfo">editorInfo</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_editorinfo_ace_replacerangestart_end_text">editorInfo.ace_replaceRange(start, end, text)</h3>
<div class="paragraph">
<p>This function replaces a range (from <code>start</code> to <code>end</code>) with <code>text</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_getrep">editorInfo.ace_getRep()</h3>
<div class="paragraph">
<p>Returns the <code>rep</code> object.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_getauthor">editorInfo.ace_getAuthor()</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_incallstack">editorInfo.ace_inCallStack()</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_incallstackifnecessary">editorInfo.ace_inCallStackIfNecessary(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_focus">editorInfo.ace_focus(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_importtext">editorInfo.ace_importText(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_importatext">editorInfo.ace_importAText(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_exporttext">editorInfo.ace_exportText(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_editorchangedsize">editorInfo.ace_editorChangedSize(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setonkeypress">editorInfo.ace_setOnKeyPress(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setonkeydown">editorInfo.ace_setOnKeyDown(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setnotifydirty">editorInfo.ace_setNotifyDirty(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_dispose">editorInfo.ace_dispose(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_seteditablebool">editorInfo.ace_setEditable(bool)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_execcommand">editorInfo.ace_execCommand(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_callwithacefn_callstack_normalize">editorInfo.ace_callWithAce(fn, callStack, normalize)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setpropertykey_value">editorInfo.ace_setProperty(key, value)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setbasetexttxt">editorInfo.ace_setBaseText(txt)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setbaseattributedtextatxt_apooljsonobj">editorInfo.ace_setBaseAttributedText(atxt, apoolJsonObj)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_applychangestobasec_optauthor_apooljsonobj">editorInfo.ace_applyChangesToBase(c, optAuthor, apoolJsonObj)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_prepareuserchangeset">editorInfo.ace_prepareUserChangeset()</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_applypreparedchangesettobase">editorInfo.ace_applyPreparedChangesetToBase()</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setuserchangenotificationcallbackf">editorInfo.ace_setUserChangeNotificationCallback(f)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setauthorinfoauthor_info">editorInfo.ace_setAuthorInfo(author, info)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_fastincorp">editorInfo.ace_fastIncorp(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_iscaret">editorInfo.ace_isCaret(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_getlineandcharforpoint">editorInfo.ace_getLineAndCharForPoint(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_performdocumentapplyattributestocharrange">editorInfo.ace_performDocumentApplyAttributesToCharRange(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_setattributeonselectionattribute_enabled">editorInfo.ace_setAttributeOnSelection(attribute, enabled)</h3>
<div class="paragraph">
<p>Sets an attribute on current range.
Example: `call.editorInfo.ace_setAttributeOnSelection("turkey::balls", true); // turkey is the attribute here, balls is the value
Notes: to remove the attribute pass enabled as false</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_toggleattributeonselection">editorInfo.ace_toggleAttributeOnSelection(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_getattributeonselectionattribute_prevchar">editorInfo.ace_getAttributeOnSelection(attribute, prevChar)</h3>
<div class="paragraph">
<p>Returns a boolean if an attribute exists on a selected range.
prevChar value should be true if you want to get the previous Character attribute instead of the current selection for example
if the caret is at position 0,1 (after first character) it&#8217;s probable you want the attributes on the character at 0,0
The attribute should be the string name of the attribute applied to the selection IE subscript
Example usage: Apply the activeButton Class to a button if an attribute is on a highlighted/selected caret position or range.
Example <code>var isItThere = documentAttributeManager.getAttributeOnSelection("turkey::balls", true);</code></p>
</div>
<div class="paragraph">
<p>See the ep_subscript plugin for an example of this function in action.
Notes: Does not work on first or last character of a line.  Suffers from a race condition if called with aceEditEvent.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_performselectionchange">editorInfo.ace_performSelectionChange(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_doindentoutdent">editorInfo.ace_doIndentOutdent(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_doundoredo">editorInfo.ace_doUndoRedo(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_doinsertunorderedlist">editorInfo.ace_doInsertUnorderedList(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_doinsertorderedlist">editorInfo.ace_doInsertOrderedList(?)</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_performdocumentapplyattributestorange">editorInfo.ace_performDocumentApplyAttributesToRange()</h3>

</div>
<div class="sect2">
<h3 id="_editorinfo_ace_getauthorinfos">editorInfo.ace_getAuthorInfos()</h3>
<div class="paragraph">
<p>Returns an info object about the author. Object key = author_id and info includes author&#8217;s bg color value.
Use to define your own authorship.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_performdocumentreplacerangestart_end_newtext">editorInfo.ace_performDocumentReplaceRange(start, end, newText)</h3>
<div class="paragraph">
<p>This function replaces a range (from [x1,y1] to [x2,y2]) with <code>newText</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_performdocumentreplacecharrangestartchar_endchar_newtext">editorInfo.ace_performDocumentReplaceCharRange(startChar, endChar, newText)</h3>
<div class="paragraph">
<p>This function replaces a range (from y1 to y2) with <code>newText</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_renumberlistlinenum">editorInfo.ace_renumberList(lineNum)</h3>
<div class="paragraph">
<p>If you delete a line, calling this method will fix the line numbering.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_doreturnkey">editorInfo.ace_doReturnKey()</h3>
<div class="paragraph">
<p>Forces a return key at the current caret position.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_isblockelementelement">editorInfo.ace_isBlockElement(element)</h3>
<div class="paragraph">
<p>Returns true if your passed element is registered as a block element</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_getlinelisttypelinenum">editorInfo.ace_getLineListType(lineNum)</h3>
<div class="paragraph">
<p>Returns the line&#8217;s html list type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_caretline">editorInfo.ace_caretLine()</h3>
<div class="paragraph">
<p>Returns X position of the caret.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_caretcolumn">editorInfo.ace_caretColumn()</h3>
<div class="paragraph">
<p>Returns Y position of the caret.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_caretdocchar">editorInfo.ace_caretDocChar()</h3>
<div class="paragraph">
<p>Returns the Y offset starting from [x=0,y=0]</p>
</div>
</div>
<div class="sect2">
<h3 id="_editorinfo_ace_iswordchar">editorInfo.ace_isWordChar(?)</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_changeset_library">Changeset Library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://github.com/ether/etherpad-lite/blob/develop/src/static/js/Changeset.js">changeset
library</a>
provides tools to create, read, and apply changesets.</p>
</div>
<div class="sect2">
<h3 id="_changeset">Changeset</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const Changeset = require('ep_etherpad-lite/static/js/Changeset');</code></pre>
</div>
</div>
<div class="paragraph">
<p>A changeset describes the difference between two revisions of a document. When a
user edits a pad, the browser generates and sends a changeset to the server,
which relays it to the other users and saves a copy (so that every past revision
is accessible).</p>
</div>
<div class="paragraph">
<p>A transmitted changeset looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">'Z:z&gt;1|2=m=b*0|1+1$\n'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_attribute_pool">Attribute Pool</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const AttributePool = require('ep_etherpad-lite/static/js/AttributePool');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Changesets do not include any attribute key–value pairs. Instead, they use
numeric identifiers that reference attributes kept in an <a href="https://github.com/ether/etherpad-lite/blob/develop/src/static/js/AttributePool.js">attribute pool</a>.
This attribute interning reduces the transmission overhead of attributes that
are used many times.</p>
</div>
<div class="paragraph">
<p>There is one attribute pool per pad, and it includes every current and
historical attribute used in the pad.</p>
</div>
</div>
<div class="sect2">
<h3 id="_further_reading">Further Reading</h3>
<div class="paragraph">
<p>Detailed information about the changesets &amp; Easysync protocol:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ether/etherpad-lite/blob/develop/doc/easysync/easysync-notes.pdf">Easysync Protocol</a></p>
</li>
<li>
<p><a href="https://github.com/ether/etherpad-lite/blob/develop/doc/easysync/easysync-full-description.pdf">Etherpad and EasySync Technical Manual</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugin_framework">Plugin Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>require("ep_etherpad-lite/static/js/plugingfw/plugins")</code></p>
</div>
<div class="sect2">
<h3 id="_plugins_update">plugins.update</h3>
<div class="paragraph">
<p><code>require("ep_etherpad-lite/static/js/plugingfw/plugins").update()</code> will use npm
to list all installed modules and read their ep.json files, registering the
contained hooks. A hook registration is a pair of a hook name and a function
reference (filename for require() plus function name)</p>
</div>
</div>
<div class="sect2">
<h3 id="_hooks_callall">hooks.callAll</h3>
<div class="paragraph">
<p><code>require("ep_etherpad-lite/static/js/plugingfw/hooks").callAll("hook_name",
{argname:value})</code> will call all hook functions registered for <code>hook_name</code> with
<code>{argname:value}</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hooks_acallall">hooks.aCallAll</h3>
<div class="paragraph">
<p>?</p>
</div>
</div>
<div class="sect2">
<h3 id="">&#8230;&#8203;</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_toolbar_controller">Toolbar controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p>src/node/utils/toolbar.js</p>
</div>
<div class="sect2">
<h3 id="_buttonopts">button(opts)</h3>
<div class="ulist">
<ul>
<li>
<p>{Object} <code>opts</code></p>
</li>
<li>
<p><code>command</code> - this command fill be fired on the editbar on click</p>
</li>
<li>
<p><code>localizationId</code> - will be set as <code>data-l10-id</code></p>
</li>
<li>
<p><code>class</code> - here you can add additional classes to the button</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Returns: {Button}</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var orderedlist = toolbar.button({
  command: "insertorderedlist",
  localizationId: "pad.toolbar.ol.title",
  class: "buttonicon buttonicon-insertorderedlist"
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also create buttons with text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var myButton = toolbar.button({
  command: "myButton",
  localizationId: "myPlugin.toolbar.myButton",
  class: "buttontext"
})</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selectbuttonopts">selectButton(opts)</h3>
<div class="ulist">
<ul>
<li>
<p>{Object} <code>opts</code></p>
</li>
<li>
<p><code>id</code> - id of the menu item</p>
</li>
<li>
<p><code>selectId</code> - id of the select element</p>
</li>
<li>
<p><code>command</code> - this command fill be fired on the editbar on change</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Returns: {SelectButton}</p>
</div>
</div>
<div class="sect2">
<h3 id="_selectbutton_addoptionvalue_text_attributes">SelectButton.addOption(value, text, attributes)</h3>
<div class="ulist">
<ul>
<li>
<p>{String} value - The value of this option</p>
</li>
<li>
<p>{String} text - the label text used for this option</p>
</li>
<li>
<p>{Object} attributes - any additional html attributes go here (e.g. <code>data-l10n-id</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_registerbuttonname_item">registerButton(name, item)</h3>
<div class="ulist">
<ul>
<li>
<p>{String} name - used to reference the item in the toolbar config in settings.json</p>
</li>
<li>
<p>{Button|SelectButton} item - the button to add</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_editbar">Editbar</h2>
<div class="sectionbody">
<div class="paragraph">
<p>src/static/js/pad_editbar.js</p>
</div>
<div class="sect2">
<h3 id="_isenabled">isEnabled()</h3>

</div>
<div class="sect2">
<h3 id="_disable">disable()</h3>

</div>
<div class="sect2">
<h3 id="_toggledropdowndropdown">toggleDropDown(dropdown)</h3>
<div class="paragraph">
<p>Shows the dropdown <code>div.popup</code> whose <code>id</code> equals <code>dropdown</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_registercommandcmd_callback">registerCommand(cmd, callback)</h3>
<div class="paragraph">
<p>Register a handler for a specific command. Commands are fired if the corresponding button is clicked or the corresponding select is changed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_registeracecommandcmd_callback">registerAceCommand(cmd, callback)</h3>
<div class="paragraph">
<p>Creates an ace callstack and calls the callback with an ace instance (and a toolbar item, if applicable): <code>callback(cmd, ace, item)</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">toolbar.registerAceCommand("insertorderedlist", function (cmd, ace) {
  ace.ace_doInsertOrderedList();
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registerdropdowncommandcmd_dropdown">registerDropdownCommand(cmd, dropdown)</h3>
<div class="paragraph">
<p>Ties a <code>div.popup</code> where <code>id</code> equals <code>dropdown</code> to a <code>command</code> fired by clicking a button.</p>
</div>
</div>
<div class="sect2">
<h3 id="_triggercommandcmd_item">triggerCommand(cmd[, item])</h3>
<div class="paragraph">
<p>Triggers a command (optionally with some internal representation of the toolbar item that triggered it).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugins">Plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Etherpad allows you to extend its functionality with plugins. A plugin registers
hooks (functions) for certain events (thus certain features) in Etherpad to
execute its own functionality based on these events.</p>
</div>
<div class="paragraph">
<p>Publicly available plugins can be found in the npm registry (see
<a href="https://npmjs.org" class="bare">https://npmjs.org</a>). Etherpad&#8217;s naming convention for plugins is to prefix your
plugins with <code>ep_</code>. So, e.g. it&#8217;s <code>ep_flubberworms</code>. Thus you can install
plugins from npm, using <code>npm install --no-save --legacy-peer-deps
ep_flubberworm</code> in Etherpad&#8217;s root directory.</p>
</div>
<div class="paragraph">
<p>You can also browse to <code><a href="http://yourEtherpadInstan.ce/admin/plugins" class="bare">http://yourEtherpadInstan.ce/admin/plugins</a></code>, which will
list all installed plugins and those available on npm. It even provides
functionality to search through all available plugins.</p>
</div>
<div class="sect2">
<h3 id="_folder_structure">Folder structure</h3>
<div class="paragraph">
<p>Ideally a plugin has the following folder structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ep_&lt;plugin&gt;/
 ├ .github/
 │  └ workflows/
 │     └ npmpublish.yml  ◄─ GitHub workflow to auto-publish on push
 ├ static/
 │  ├ css/               ◄─ static .css files
 │  ├ images/            ◄─ static image files
 │  ├ js/
 │  │  └ index.js        ◄─ static client-side code
 │  └ tests/
 │     ├ backend/
 │     │  └ specs/       ◄─ backend (server) tests
 │     └ frontend/
 │        └ specs/       ◄─ frontend (client) tests
 ├ templates/            ◄─ EJS templates (.html, .js, .css, etc.)
 ├ locales/
 │  ├ en.json            ◄─ English (US) strings
 │  └ qqq.json           ◄─ optional hints for translators
 ├ .travis.yml           ◄─ Travis CI config
 ├ LICENSE
 ├ README.md
 ├ ep.json               ◄─ Etherpad plugin definition
 ├ index.js              ◄─ server-side code
 ├ package.json
 └ package-lock.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your plugin includes client-side hooks, put them in <code>static/js/</code>. If you&#8217;re
adding in CSS or image files, you should put those files in <code>static/css/ `and
`static/image/</code>, respectively, and templates go into <code>templates/</code>. Translations
go into <code>locales/</code>. Tests go in <code>static/tests/backend/specs/</code> and
<code>static/tests/frontend/specs/</code>.</p>
</div>
<div class="paragraph">
<p>A Standard directory structure like this makes it easier to navigate through
your code. That said, do note, that this is not actually <strong>required</strong> to make your
plugin run. If you want to make use of our i18n system, you need to put your
translations into <code>locales/</code>, though, in order to have them integrated. (See
"Localization" for more info on how to localize your plugin.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_plugin_definition">Plugin definition</h3>
<div class="paragraph">
<p>Your plugin definition goes into <code>ep.json</code>. In this file you register your hook
functions, indicate the parts of your plugin and the order of execution. (A
documentation of all available events to hook into can be found in chapter
<a href="#_server_side_hooks">Server-side hooks</a>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "parts": [
    {
      "name": "nameThisPartHoweverYouWant",
      "hooks": {
        "authenticate": "ep_&lt;plugin&gt;/&lt;file&gt;:functionName1",
        "expressCreateServer": "ep_&lt;plugin&gt;/&lt;file&gt;:functionName2"
      },
      "client_hooks": {
        "acePopulateDOMLine": "ep_&lt;plugin&gt;/&lt;file&gt;:functionName3"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A hook function registration maps a hook name to a hook function specification.
The hook function specification looks like <code>ep_example/file.js:functionName</code>. It
consists of two parts separated by a colon: a module name to <code>require()</code> and the
name of a function exported by the named module. See
<a href="https://nodejs.org/docs/latest/api/modules.html#modules_module_exports"><code>module.exports</code></a>
for how to export a function.</p>
</div>
<div class="paragraph">
<p>For the module name you can omit the <code>.js</code> suffix, and if the file is <code>index.js</code>
you can use just the directory name. You can also omit the module name entirely,
in which case it defaults to the plugin name (e.g., <code>ep_example</code>).</p>
</div>
<div class="paragraph">
<p>You can also omit the function name. If you do, Etherpad will look for an
exported function whose name matches the name of the hook (e.g.,
<code>authenticate</code>).</p>
</div>
<div class="paragraph">
<p>If either the module name or the function name is omitted (or both), the colon
may also be omitted unless the provided module name contains a colon. (So if the
module name is <code>C:\foo.js</code> then the hook function specification with the
function name omitted would be <code>"C:\\foo.js:"</code>.)</p>
</div>
<div class="paragraph">
<p>Examples: Suppose the plugin name is <code>ep_example</code>. All of the following are
equivalent, and will cause the <code>authorize</code> hook to call the <code>exports.authorize</code>
function in <code>index.js</code> from the <code>ep_example</code> plugin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"authorize": "ep_example/index.js:authorize"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example/index.js:"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example/index.js"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example/index:authorize"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example/index:"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example/index"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example:authorize"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example:"</code></p>
</li>
<li>
<p><code>"authorize": "ep_example"</code></p>
</li>
<li>
<p><code>"authorize": ":authorize"</code></p>
</li>
<li>
<p><code>"authorize": ":"</code></p>
</li>
<li>
<p><code>"authorize": ""</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_client_hooks_and_server_hooks">Client hooks and server hooks</h4>
<div class="paragraph">
<p>There are server hooks, which will be executed on the server (e.g.
<code>expressCreateServer</code>), and there are client hooks, which are executed on the
client (e.g. <code>acePopulateDomLine</code>). Be sure to not make assumptions about the
environment your code is running in, e.g. don&#8217;t try to access <code>process</code>, if you
know your code will be run on the client, and likewise, don&#8217;t try to access
<code>window</code> on the server&#8230;&#8203;</p>
</div>
</div>
<div class="sect3">
<h4 id="_styling">Styling</h4>
<div class="paragraph">
<p>When you install a client-side plugin (e.g. one that implements at least one
client-side hook), the plugin name is added to the <code>class</code> attribute of the div
<code>#editorcontainerbox</code> in the main window. This gives you the opportunity of
tuning the appearance of the main UI in your plugin.</p>
</div>
<div class="paragraph">
<p>For example, this is the markup with no plugins installed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;div id="editorcontainerbox" class=""&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and this is the contents after installing <code>someplugin</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;div id="editorcontainerbox" class="ep_someplugin"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This feature was introduced in Etherpad <strong>1.8</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parts">Parts</h4>
<div class="paragraph">
<p>As your plugins become more and more complex, you will find yourself in the need
to manage dependencies between plugins. E.g. you want the hooks of a certain
plugin to be executed before (or after) yours. You can also manage these
dependencies in your plugin definition file <code>ep.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "parts": [
    {
      "name": "onepart",
      "pre": [],
      "post": ["ep_onemoreplugin/partone"],
      "hooks": {
        "storeBar": "ep_monospace/plugin:storeBar",
        "getFoo": "ep_monospace/plugin:getFoo"
      }
    },
    {
      "name": "otherpart",
      "pre": ["ep_my_example/somepart", "ep_otherplugin/main"],
      "post": [],
      "hooks": {
        "someEvent": "ep_my_example/otherpart:someEvent",
        "another": "ep_my_example/otherpart:another"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Usually a plugin will add only one functionality at a time, so it will probably
only use one <code>part</code> definition to register its hooks. However, sometimes you
have to put different (unrelated) functionalities into one plugin. For this you
will want use parts, so other plugins can depend on them.</p>
</div>
<div class="sect4">
<h5 id="_prepost">pre/post</h5>
<div class="paragraph">
<p>The <code>"pre"</code> and <code>"post"</code> definitions, affect the order in which parts of a
plugin are executed. This ensures that plugins and their hooks are executed in
the correct order.</p>
</div>
<div class="paragraph">
<p><code>"pre"</code> lists parts that must be executed <strong>before</strong> the defining part. <code>"post"</code>
lists parts that must be executed <strong>after</strong> the defining part.</p>
</div>
<div class="paragraph">
<p>You can, on a basic level, think of this as double-ended dependency listing. If
you have a dependency on another plugin, you can make sure it loads before yours
by putting it in <code>"pre"</code>. If you are setting up things that might need to be
used by a plugin later, you can ensure proper order by putting it in <code>"post"</code>.</p>
</div>
<div class="paragraph">
<p>Note that it would be far more sane to use <code>"pre"</code> in almost any case, but if
you want to change config variables for another plugin, or maybe modify its
environment, <code>"post"</code> could definitely be useful.</p>
</div>
<div class="paragraph">
<p>Also, note that dependencies should <strong>also</strong> be listed in your package.json, so
they can be `npm install&#8217;d automagically when your plugin gets installed.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_package_definition">Package definition</h3>
<div class="paragraph">
<p>Your plugin must also contain a <a href="https://docs.npmjs.com/files/package.json">package definition
file</a>, called package.json, in the
project root - this file contains various metadata relevant to your plugin, such
as the name and version number, author, project hompage, contributors, a short
description, etc. If you publish your plugin on npm, these metadata are used for
package search etc., but it&#8217;s necessary for Etherpad plugins, even if you don&#8217;t
publish your plugin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "ep_PLUGINNAME",
  "version": "0.0.1",
  "description": "DESCRIPTION",
  "author": "USERNAME (REAL NAME) &lt;MAIL@EXAMPLE.COM&gt;",
  "contributors": [],
  "dependencies": {"MODULE": "0.3.20"},
  "engines": {"node": "&gt;=12.17.0"}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_templates">Templates</h3>
<div class="paragraph">
<p>If your plugin adds or modifies the front end HTML (e.g. adding buttons or
changing their functions), you should put the necessary HTML code for such
operations in <code>templates/</code>, in files of type ".ejs", since Etherpad uses EJS for
HTML templating. See the following link for more information about EJS:
<a href="https://github.com/visionmedia/ejs" class="bare">https://github.com/visionmedia/ejs</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_writing_and_running_front_end_tests_for_your_plugin">Writing and running front-end tests for your plugin</h3>
<div class="paragraph">
<p>Etherpad allows you to easily create front-end tests for plugins.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new folder: <code>%your_plugin%/static/tests/frontend/specs</code></p>
</li>
<li>
<p>Put your spec file in there. (Example spec files are visible in
<code>%etherpad_root_folder%/frontend/tests/specs</code>.)</p>
</li>
<li>
<p>Visit <a href="http://yourserver.com/frontend/tests" class="bare">http://yourserver.com/frontend/tests</a> and your front-end tests will run.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cookies">Cookies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cookies used by Etherpad.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sample value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expires/max-age</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Http-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usage description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">express_sid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s%3A7yCNjRmTW8ylGQ53I2IhOwYF9&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">example.org</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session ID of the <a href="https://expressjs.com">Express web framework</a>. When Etherpad is behind a reverse proxy, and an administrator wants to use session stickiness, he may use this cookie. If you are behind a reverse proxy, please remember to set <code>trustProxy: true</code> in <code>settings.json</code>. Set in <a href="https://github.com/ether/etherpad-lite/blob/01497aa399690e44393e91c19917d11d025df71b/src/node/hooks/express/webaccess.js#L131">webaccess.js#L131</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">example.org</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The language of the UI (e.g.: <code>en-GB</code>, <code>it</code>). Set in <a href="https://github.com/ether/etherpad-lite/blob/01497aa399690e44393e91c19917d11d025df71b/src/static/js/pad_editor.js#L111">pad_editor.js#L111</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prefs / prefsHttp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">%7B%22epThemesExtTheme%22&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">example.org</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/p</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">year 3000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client-side preferences (e.g.: font family, chat always visible, show authorship colors, &#8230;&#8203;). Set in <a href="https://github.com/ether/etherpad-lite/blob/01497aa399690e44393e91c19917d11d025df71b/src/static/js/pad_cookie.js#L49">pad_cookie.js#L49</a>. <code>prefs</code> is used if Etherpad is accessed over HTTPS, <code>prefsHttp</code> if accessed over HTTP. For more info see <a href="https://github.com/ether/etherpad-lite/issues/3179" class="bare">https://github.com/ether/etherpad-lite/issues/3179</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">t.tFzkihhhBf4xKEpCK3PU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">example.org</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60 days</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A random token representing the author, of the form <code>t.randomstring_of_lenght_20</code>. The random string is generated by the client, at <a href="https://github.com/ether/etherpad-lite/blob/01497aa399690e44393e91c19917d11d025df71b/src/static/js/pad.js#L55-L66">pad.js#L55-L66</a>. This cookie is always set by the client at <a href="https://github.com/ether/etherpad-lite/blob/01497aa399690e44393e91c19917d11d025df71b/src/static/js/pad.js#L153-L158">pad.js#L153-L158</a> without any solicitation from the server. It is used for all the pads accessed via the web UI (not used for the HTTP API). On the server side, its value is accessed at <a href="https://github.com/ether/etherpad-lite/blob/01497aa399690e44393e91c19917d11d025df71b/src/node/db/SecurityManager.js#L33">SecurityManager.js#L33</a>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more info, visit the related discussion at <a href="https://github.com/ether/etherpad-lite/issues/3563" class="bare">https://github.com/ether/etherpad-lite/issues/3563</a>.</p>
</div>
<div class="paragraph">
<p>Etherpad HTTP API clients may make use (if they choose so) to send another cookie:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sample value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usage description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sessionID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">s.1c70968b333b25476a2c7bdd0e0bed17</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_database_structure">Database structure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_keys_and_their_values">Keys and their values</h3>
<div class="sect3">
<h4 id="_groups_2">groups</h4>
<div class="paragraph">
<p>A list of all existing groups (a JSON object with groupIDs as keys and <code>1</code> as values).</p>
</div>
</div>
<div class="sect3">
<h4 id="_padpadid">pad:$PADID</h4>
<div class="paragraph">
<p>Contains all information about pads</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>atext</strong> - the latest attributed text</p>
</li>
<li>
<p><strong>pool</strong> - the attribute pool</p>
</li>
<li>
<p><strong>head</strong> - the number of the latest revision</p>
</li>
<li>
<p><strong>chatHead</strong> - the number of the latest chat entry</p>
</li>
<li>
<p><strong>public</strong> - flag that disables security for this pad</p>
</li>
<li>
<p><strong>passwordHash</strong> - string that contains a salted sha512 sum of this pad&#8217;s password</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_padpadidrevsrevnum">pad:$PADID:revs:$REVNUM</h4>
<div class="paragraph">
<p>Saves a revision $REVNUM of pad $PADID</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>meta</strong></p>
</li>
<li>
<p><strong>author</strong> - the autorID of this revision</p>
</li>
<li>
<p><strong>timestamp</strong> - the timestamp of when this revision was created</p>
</li>
<li>
<p><strong>changeset</strong> - the changeset of this revision</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_padpadidchatchatnum">pad:$PADID:chat:$CHATNUM</h4>
<div class="paragraph">
<p>Saves a chat entry with num $CHATNUM of pad $PADID</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>text</strong> - the text of this chat entry</p>
</li>
<li>
<p><strong>userId</strong> - the authorID of this chat entry</p>
</li>
<li>
<p><strong>time</strong> - the timestamp of this chat entry</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pad2readonlypadid">pad2readonly:$PADID</h4>
<div class="paragraph">
<p>Translates a padID to a readonlyID</p>
</div>
</div>
<div class="sect3">
<h4 id="_readonly2padreadonlyid">readonly2pad:$READONLYID</h4>
<div class="paragraph">
<p>Translates a readonlyID to a padID</p>
</div>
</div>
<div class="sect3">
<h4 id="_token2authortokenid">token2author:$TOKENID</h4>
<div class="paragraph">
<p>Translates a token to an authorID</p>
</div>
</div>
<div class="sect3">
<h4 id="_globalauthorauthorid">globalAuthor:$AUTHORID</h4>
<div class="paragraph">
<p>Information about an author</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>name</strong> - the name of this author as shown in the pad</p>
</li>
<li>
<p><strong>colorID</strong> - the colorID of this author as shown in the pad</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mapper2groupmapper">mapper2group:$MAPPER</h4>
<div class="paragraph">
<p>Maps an external application identifier to an internal group</p>
</div>
</div>
<div class="sect3">
<h4 id="_mapper2authormapper">mapper2author:$MAPPER</h4>
<div class="paragraph">
<p>Maps an external application identifier to an internal author</p>
</div>
</div>
<div class="sect3">
<h4 id="_groupgroupid">group:$GROUPID</h4>
<div class="paragraph">
<p>a group of pads</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>pads</strong> - object with pad names in it, values are 1
==== session:$SESSIONID
a session between an author and a group</p>
</li>
<li>
<p><strong>groupID</strong> - the groupID the session belongs too</p>
</li>
<li>
<p><strong>authorID</strong> - the authorID the session belongs too</p>
</li>
<li>
<p><strong>validUntil</strong> - the timestamp until this session is valid</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_author2sessionsauthorid">author2sessions:$AUTHORID</h4>
<div class="paragraph">
<p>saves the sessions of an author</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>sessionsIDs</strong> - object with sessionIDs in it, values are 1</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_group2sessionsgroupid">group2sessions:$GROUPID</h4>
<div class="ulist">
<ul>
<li>
<p><strong>sessionsIDs</strong> - object with sessionIDs in it, values are 1</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-10-09 11:33:49 +0200
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>